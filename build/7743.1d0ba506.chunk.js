(self.webpackChunkstrapi=self.webpackChunkstrapi||[]).push([[7743],{22107:(qe,He,o)=>{var r=o(13578),P=o(27138),$="[object RegExp]";function Se(ye){return P(ye)&&r(ye)==$}qe.exports=Se},50156:(qe,He,o)=>{var r=o(22107),P=o(20435),$=o(25336),Se=$&&$.isRegExp,ye=Se?P(Se):r;qe.exports=ye},88702:(qe,He,o)=>{var r=o(63546),P=o(82311),$=o(11993),Se=o(3243),ye=o(50156),at=o(30930),D=o(66734),G=o(69740),ke=o(16946),Ye=30,ze="...",mt=/\w*$/;function pt(ue,be){var ve=Ye,xe=ze;if(Se(be)){var K="separator"in be?be.separator:K;ve="length"in be?G(be.length):ve,xe="omission"in be?r(be.omission):xe}ue=ke(ue);var Ee=ue.length;if($(ue)){var Ce=D(ue);Ee=Ce.length}if(ve>=Ee)return ue;var ce=ve-at(xe);if(ce<1)return xe;var me=Ce?P(Ce,0,ce).join(""):ue.slice(0,ce);if(K===void 0)return me+xe;if(Ce&&(ce+=me.length-ce),ye(K)){if(ue.slice(ce).search(K)){var Ue,gt=me;for(K.global||(K=RegExp(K.source,ke(mt.exec(K))+"g")),K.lastIndex=0;Ue=K.exec(gt);)var X=Ue.index;me=me.slice(0,X===void 0?ce:X)}}else if(ue.indexOf(r(K),ce)!=ce){var Xe=me.lastIndexOf(K);Xe>-1&&(me=me.slice(0,Xe))}return me+xe}qe.exports=pt},27743:(qe,He,o)=>{"use strict";o.r(He),o.d(He,{A:()=>De,C:()=>St,a:()=>Ie,g:()=>u,i:()=>Eo,u:()=>je});var r=o(74081),P=o(27279),$=o(93415),Se=o(1782),ye=o(50703),at=o(61181),D=o(10701),G=o(21395),ke=o(1099),Ye=o(23298),ze=o(74577),mt=o(83),pt=o(68412),ue=o(15244),be=o(69878),ve=o(94098),xe=o(84366),K=o(61908),Ee=o(5627),Ce=o(78955),ce=o(61657),me=o(22572),Ue=o(12881),gt=o(98903),X=o(48102),Xe=o(6918),ba=o(1821),xa=o(2878),Ta=o(10989),Ca=o(77804),Ma=o(31624),ln=o(4987),ja=o(2981),Ra=o(8295),Aa=o(61121),Za=o(39708),Sa=o(5938),Na=o(35250),Fa=o(27997),A=o(1180),La=o(364),W=o(61020),dn=o(47533),oe=o(51447),Oa=o(71877),Ea=o(25804),Pa=o(96220),Ia=o(20534),Da=o(10411),pe=o(72450),$a=o(74513);const qa=(0,pe.default)($.x)`
  svg {
    height: ${4/16}rem;
    path {
      fill: ${({theme:e})=>e.colors.neutral700};
    }
  }
`,ka=pe.default.button`
  border: none;
  padding: 0;
  background: transparent;
  display: flex;
  align-items: center;
`,za=pe.default.div`
  display: flex;
  align-items: center;
  width: ${12/16}rem;
  transform: rotateX(${({rotated:e})=>e?"0deg":"180deg"});
`,Ua=({label:e,children:t,id:n})=>{const[s,i]=(0,P.useState)(!0),l=(0,$a.M)(n),d=()=>{i(c=>!c)};return(0,r.jsxs)($.x,{children:[(0,r.jsx)(qa,{paddingLeft:7,paddingTop:2,paddingBottom:2,paddingRight:4,children:(0,r.jsx)(D.k,{justifyContent:"space-between",children:(0,r.jsxs)(ka,{onClick:d,"aria-expanded":s,"aria-controls":l,children:[(0,r.jsx)(za,{rotated:s,children:(0,r.jsx)(Da.Z,{"aria-hidden":!0})}),(0,r.jsx)($.x,{paddingLeft:2,children:(0,r.jsx)(G.Z,{as:"span",fontWeight:"semiBold",textColor:"neutral800",children:e})})]})})}),s&&(0,r.jsx)("ul",{id:l,children:P.Children.map(t,(c,f)=>(0,r.jsx)("li",{children:c},f))})]})};var un=o(49370),Ba=o(89486),Wa=o(82298),st=o(61846),Va=o(56692),Ga=o(79131),wa=o(53264),Ha=o(93454),cn=o(76827),Ya=o(53274),Xa=o(45684),Qa=o(7559),Ja=o(31654),Ka=o(18334),_a=o(42108),es=o(32721),ts=o(67224),ns=o(20316),as=o(36974),ss=o(8419),rs=o(42190),is=o(3232),os=o(4896),ls=o(64386),ds=o(59082),us=o(73192),cs=o(98430),ms=o(74002),ps=o(35318),gs=o(70743),fs=o(38724),hs=o(94187),ys=o(70415),vs=o(8243),bs=o(71267),xs=o(61646),Ts=o(92518),Cs=o(67890),Ms=o(95957),js=o(20184),Rs=o(54285),As=o(7995),Zs=o(47241),Ss=o(87532),Ns=o(16543),Fs=o(68285),Ls=o(271),Os=o(98264),Es=o(89824),Ps=o(89906),Is=o(47278),Ds=o(66390),$s=o(57121),qs=o(61287),ks=o(84670),zs=o(56074),Us=o(20302),Bs=o(66351),Ws=o(59453),Vs=o(99001),Gs=o(11618),ws=o(36952),Hs=o(53723),Ys=o(42679),Xs=o(64059),Qs=o(5368),Js=o(52827),Ks=o(31440),_s=o(43582),er=o(58113),tr=o(47243),nr=o(91561),ar=o(13389),mn=o(43286),pn=o(27645),gn=o(36730),sr=o(42821),rr=o(50862),ir=o(68077),or=o(88678),lr=o(1628),dr=o(74334),fn=o(64510),hn=o(1267),yn=o(91682),ur=o(30770),cr=o(95096),mr=o(13789),pr=o(26784),gr=o(71387),fr=o(23109),hr=o(38447),yr=o(83761),vr=o(26244),br=o(64820),Ne=o(36938),xr=o(29426),Tr=o(72535),Cr=o(13317),Mr=o(63302),jr=o(50186),Rr=o(76715),Ar=o(48098),Zr=o(70901),Sr=o(54763),vn=o(10382),Nr=o(60674),Fr=o(55353),Lr=o(94842),Or=o(27733),Er=o(86874),Pr=o(66721),Ir=o(10438),Dr=o(39142),$r=o(80103),qr=o(89975),kr=o(48577),zr=o(2426),Ur=o(68501),Br=o(34389),Wr=o(8152),Vr=o(1072),Gr=o(23333),wr=o(36558),Hr=o(19395),Yr=o(4452),Xr=o(52245),Qr=o(27866),Jr=o(804),Kr=o(30984),Qe=o(60330),_r=o(89677),ei=o(67929),bn=o(14461),ti=o(60069),rt=o(52374),ni=o(24001),ai=o(16719),xn=o(14858),ft=o(48809),Tn=o(6913),si=o(24307),ri=o(967),ii=o(26171),oi=o(606),Cn=o(63161),li=o(81907),di=o(95687),ui=o(52448),ci=o(78665),Me=o(51943),b=o(99732),ht=o(6078),L=o(98934),mi=o(63799),Mn=o(43433),pi=o(84921),a=o(70627),Pe=o(49402),gi=o(10131),jn=o(79146),fi=o(29206),yt=o(6699),Rn=o(88702),M=o(47853),hi=o(12665),yi=o(81465),vt=o(51527),vi=o(61815),bi=o(49204),An=o(74919),xi=o(51006);const u=e=>`${b.p}.${e}`,Zn=(0,P.createContext)(),je=()=>(0,P.useContext)(Zn),Sn=(0,P.createContext)(),Ie=()=>(0,P.useContext)(Sn),Ti=()=>{const{components:e,componentsGroupedByCategory:t,contentTypes:n,isInDevelopmentMode:s,sortedContentTypesList:i,modifiedData:l,initialData:d}=je(),c=(0,A.useNotification)(),{trackUsage:f}=(0,A.useTracking)(),[m,p]=(0,P.useState)(""),{onOpenModalCreateSchema:g,onOpenModalEditCategory:x}=Ie(),{locale:C}=(0,W.Z)(),{startsWith:h}=(0,A.useFilter)(C,{sensitivity:"base"}),j=(0,A.useCollator)(C,{sensitivity:"base"}),O=!Object.keys(n).some(I=>n[I].isTemporary===!0)&&!Object.keys(e).some(I=>e[I].isTemporary===!0)&&ht(l,d),T=()=>{O?(f("willCreateContentType"),g({modalType:"contentType",kind:"collectionType",actionType:"create",forTarget:"contentType"})):E()},R=()=>{O?(f("willCreateSingleType"),g({modalType:"contentType",kind:"singleType",actionType:"create",forTarget:"contentType"})):E()},Z=()=>{O?(f("willCreateComponent"),g({modalType:"component",kind:null,actionType:"create",forTarget:"component"})):E()},E=()=>{c({type:"info",message:{id:u("notification.info.creating.notSaved"),defaultMessage:"Please save your work before creating a new collection type or component"}})},z=Object.entries(t).map(([I,ee])=>({name:I,title:I,isEditable:s,onClickEdit(U,w){U.stopPropagation(),O?x(w.name):E()},links:ee.map(U=>({name:U.uid,to:`/plugins/${b.p}/component-categories/${I}/${U.uid}`,title:U.schema.displayName})).sort((U,w)=>j.compare(U.title,w.title))})).sort((I,ee)=>j.compare(I.title,ee.title)),Y=i.filter(I=>I.visible);return{menu:[{name:"models",title:{id:`${u("menu.section.models.name")}`,defaultMessage:"Collection Types"},customLink:s&&{id:`${u("button.model.create")}`,defaultMessage:"Create new collection type",onClick:T},links:Y.filter(I=>I.kind==="collectionType")},{name:"singleTypes",title:{id:`${u("menu.section.single-types.name")}`,defaultMessage:"Single Types"},customLink:s&&{id:`${u("button.single-types.create")}`,defaultMessage:"Create new single type",onClick:R},links:Y.filter(I=>I.kind==="singleType")},{name:"components",title:{id:`${u("menu.section.components.name")}`,defaultMessage:"Components"},customLink:s&&{id:`${u("button.component.create")}`,defaultMessage:"Create a new component",onClick:Z},links:z}].map(I=>I.links.some(U=>Array.isArray(U.links))?{...I,links:I.links.map(U=>{const w=U.links.filter(H=>h(H.title,m));return w.length===0?null:{...U,links:w.sort((H,J)=>j.compare(H.title,J.title))}}).filter(Boolean)}:{...I,links:I.links.filter(U=>h(U.title,m)).sort((U,w)=>j.compare(U.title,w.title))}),searchValue:m,onSearchChange:p}},Ci=()=>{const{menu:e,searchValue:t,onSearchChange:n}=Ti(),{formatMessage:s}=(0,W.Z)();return(0,r.jsxs)(Oa.m,{ariaLabel:s({id:`${u("plugin.name")}`,defaultMessage:"Content-Types Builder"}),children:[(0,r.jsx)(Ea.p,{searchable:!0,value:t,onClear:()=>n(""),onChange:i=>n(i.target.value),label:s({id:`${u("plugin.name")}`,defaultMessage:"Content-Types Builder"}),searchLabel:s({id:"global.search",defaultMessage:"Search"})}),(0,r.jsx)(Pa.Z,{children:e.map(i=>(0,r.jsxs)(P.Fragment,{children:[(0,r.jsx)(Ia.D,{label:s({id:i.title.id,defaultMessage:i.title.defaultMessage}),collapsable:!0,badgeLabel:i.links.length.toString(),children:i.links.map(l=>l.links?(0,r.jsx)(Ua,{label:Me(l.title),children:l.links.map(d=>(0,r.jsx)(un.E,{as:dn.OL,to:d.to,active:d.active,isSubSectionChild:!0,children:Me(s({id:d.name,defaultMessage:d.title}))},d.name))},l.name):(0,r.jsx)(un.E,{as:dn.OL,to:l.to,active:l.active,children:Me(s({id:l.name,defaultMessage:l.title}))},l.name))}),i.customLink&&(0,r.jsx)($.x,{paddingLeft:7,children:(0,r.jsx)(Se.A,{onClick:i.customLink.onClick,startIcon:(0,r.jsx)(ye.J,{as:Ne.Z,width:(0,A.pxToRem)(8),height:(0,A.pxToRem)(8)}),marginTop:2,children:s({id:i.customLink.id,defaultMessage:i.customLink.defaultMessage})})})]},i.name))})]})},Nn=e=>e.kind==="collectionType"&&(e.restrictRelationsTo===null||Array.isArray(e.restrictRelationsTo)&&e.restrictRelationsTo.length>0),bt=(e,t)=>e.find(({name:n})=>n===t),Mi=[{label:"All",children:[{label:"images (JPEG, PNG, GIF, SVG, TIFF, ICO, DVU)",value:"images"},{label:"videos (MPEG, MP4, Quicktime, WMV, AVI, FLV)",value:"videos"},{label:"audios (MP3, WAV, OGG)",value:"audios"},{label:"files (CSV, ZIP, PDF, Excel, JSON, ...)",value:"files"}]}],xt=({intlLabel:e,name:t,onChange:n,value:s})=>{const{formatMessage:i}=(0,W.Z)(),l=s===null||s.length===0?i({id:"global.none",defaultMessage:"None"}):[...s].sort().map(c=>Me(c)).join(", "),d=e.id?i({id:e.id,defaultMessage:e.defaultMessage}):t;return(0,r.jsx)(at.Q,{id:"select1",label:d,customizeContent:()=>l,onChange:c=>{c.length>0?n({target:{name:t,value:c,type:"allowed-types-select"}}):n({target:{name:t,value:null,type:"allowed-types-select"}})},options:Mi,value:s||[]})};xt.defaultProps={value:null},xt.propTypes={intlLabel:a.shape({id:a.string.isRequired,defaultMessage:a.string.isRequired,values:a.object}).isRequired,name:a.string.isRequired,onChange:a.func.isRequired,value:a.oneOfType([a.object,a.array])};const Fn={biginteger:Qe.Z,blocks:_r.Z,boolean:ei.Z,collectionType:bn.Z,component:ti.Z,contentType:bn.Z,date:rt.Z,datetime:rt.Z,decimal:Qe.Z,dynamiczone:ni.Z,email:ai.Z,enum:xn.Z,enumeration:xn.Z,file:ft.Z,files:ft.Z,float:Qe.Z,integer:Qe.Z,json:Tn.Z,JSON:Tn.Z,media:ft.Z,number:Qe.Z,password:si.Z,relation:ri.Z,richtext:ii.Z,singleType:oi.Z,string:Cn.Z,text:Cn.Z,time:rt.Z,timestamp:rt.Z,uid:li.Z},ji=(0,pe.default)($.x)`
  svg {
    height: 100%;
    width: 100%;
  }
`,De=({type:e,customField:t,...n})=>{const s=(0,A.useCustomFields)();let i=Fn[e];if(t){const{icon:l}=s.get(t);l&&(i=l)}return Fn[e]?(0,r.jsx)(ji,{height:(0,A.pxToRem)(24),width:(0,A.pxToRem)(32),shrink:0,...n,"aria-hidden":!0,children:(0,r.jsx)($.x,{as:i})}):null};De.defaultProps={customField:null},De.propTypes={type:a.string.isRequired,customField:a.string};const Ln=(0,pe.default)($.x)`
  width: 100%;
  height: 100%;
  border: 1px solid ${({theme:e})=>e.colors.neutral200};
  text-align: left;
  &:hover {
    background: ${({theme:e})=>e.colors.primary100};
    border: 1px solid ${({theme:e})=>e.colors.primary200};
  }
`,Ri=["blocks"],Ai=()=>(0,r.jsx)(D.k,{grow:1,justifyContent:"flex-end",children:(0,r.jsxs)(D.k,{gap:1,fontSizes:0,hasRadius:!0,background:"alternative100",padding:`${2/16}rem ${4/16}rem`,children:[(0,r.jsx)(ye.J,{width:`${10/16}rem`,height:`${10/16}rem`,as:di.Z,color:"alternative600"}),(0,r.jsx)(G.Z,{textColor:"alternative600",variant:"sigma",children:"New"})]})}),Tt=({type:e})=>{const{formatMessage:t}=(0,W.Z)(),{onClickSelectField:n}=Ie(),s=()=>{n({attributeType:e,step:e==="component"?"1":null})};return(0,r.jsx)(Ln,{padding:4,as:"button",hasRadius:!0,type:"button",onClick:s,children:(0,r.jsxs)(D.k,{children:[(0,r.jsx)(De,{type:e}),(0,r.jsxs)($.x,{paddingLeft:4,width:"100%",children:[(0,r.jsxs)(D.k,{justifyContent:"space-between",children:[(0,r.jsx)(G.Z,{fontWeight:"bold",children:t({id:u(`attribute.${e}`),defaultMessage:e})}),Ri.includes(e)&&(0,r.jsx)(Ai,{})]}),(0,r.jsx)(D.k,{children:(0,r.jsx)(G.Z,{variant:"pi",textColor:"neutral600",children:t({id:u(`attribute.${e}.description`),defaultMessage:"A type for modeling data"})})})]})]})})};Tt.defaultProps={type:"text"},Tt.propTypes={type:a.string};const On=({attributes:e})=>(0,r.jsx)(ke.k,{tagName:"button",children:(0,r.jsx)(D.k,{direction:"column",alignItems:"stretch",gap:8,children:e.map((t,n)=>(0,r.jsx)(Ye.r,{gap:3,children:t.map(s=>(0,r.jsx)(ze.P,{col:6,children:(0,r.jsx)(Tt,{type:s})},s))},n))})});On.propTypes={attributes:a.array.isRequired};const En=({customFieldUid:e,customField:t})=>{const{type:n,intlLabel:s,intlDescription:i}=t,{formatMessage:l}=(0,W.Z)(),{onClickSelectCustomField:d}=Ie(),c=()=>{d({attributeType:n,customFieldUid:e})};return(0,r.jsx)(Ln,{padding:4,as:"button",hasRadius:!0,type:"button",onClick:c,children:(0,r.jsxs)(D.k,{children:[(0,r.jsx)(De,{type:n,customField:e}),(0,r.jsxs)($.x,{paddingLeft:4,children:[(0,r.jsx)(D.k,{children:(0,r.jsx)(G.Z,{fontWeight:"bold",children:l(s)})}),(0,r.jsx)(D.k,{children:(0,r.jsx)(G.Z,{variant:"pi",textColor:"neutral600",children:l(i)})})]})]})})};En.propTypes={customFieldUid:a.string.isRequired,customField:a.shape({type:a.string.isRequired,icon:a.func,intlLabel:a.shape({id:a.string.isRequired,defaultMessage:a.string.isRequired}).isRequired,intlDescription:a.shape({id:a.string.isRequired,defaultMessage:a.string.isRequired}).isRequired}).isRequired};const Zi=(0,pe.default)($.x)`
  background: ${({theme:e})=>`linear-gradient(180deg, rgba(234, 234, 239, 0) 0%, ${e.colors.neutral150} 100%)`};
  opacity: 0.33;
`,Si=()=>(0,r.jsx)(D.k,{wrap:"wrap",gap:4,children:[...Array(4)].map((e,t)=>(0,r.jsx)(Zi,{height:"138px",width:"375px",hasRadius:!0},`empty-card-${t}`))}),Ni=()=>{const{formatMessage:e}=(0,W.Z)();return(0,r.jsxs)($.x,{position:"relative",children:[(0,r.jsx)(Si,{}),(0,r.jsx)($.x,{position:"absolute",top:6,width:"100%",children:(0,r.jsxs)(D.k,{alignItems:"center",justifyContent:"center",direction:"column",children:[(0,r.jsx)(ye.J,{as:ui.Z,color:"",width:"160px",height:"88px"}),(0,r.jsx)($.x,{paddingTop:6,paddingBottom:4,children:(0,r.jsxs)($.x,{textAlign:"center",children:[(0,r.jsx)(G.Z,{variant:"delta",as:"p",textColor:"neutral600",children:e({id:u("modalForm.empty.heading"),defaultMessage:"Nothing in here yet."})}),(0,r.jsx)($.x,{paddingTop:4,children:(0,r.jsx)(G.Z,{variant:"delta",as:"p",textColor:"neutral600",children:e({id:u("modalForm.empty.sub-heading"),defaultMessage:"Find what you are looking for through a wide range of extensions."})})})]})}),(0,r.jsx)(mt.Q,{to:`/marketplace?${fi.stringify({categories:["Custom fields"]})}`,variant:"secondary",startIcon:(0,r.jsx)(Ne.Z,{}),children:e({id:u("modalForm.empty.button"),defaultMessage:"Add custom fields"})})]})})]})},Fi=()=>{const{formatMessage:e}=(0,W.Z)(),t=(0,A.useCustomFields)(),n=Object.entries(t.getAll());if(!n.length)return(0,r.jsx)(Ni,{});const s=n.sort((i,l)=>i[1].name>l[1].name?1:-1);return(0,r.jsx)(ke.k,{tagName:"button",children:(0,r.jsxs)(D.k,{direction:"column",alignItems:"stretch",gap:3,children:[(0,r.jsx)(Ye.r,{gap:3,children:s.map(([i,l])=>(0,r.jsx)(ze.P,{col:6,children:(0,r.jsx)(En,{customFieldUid:i,customField:l},i)},i))}),(0,r.jsx)(pt.r,{href:"https://docs.strapi.io/developer-docs/latest/development/custom-fields.html",isExternal:!0,children:e({id:u("modalForm.tabs.custom.howToLink"),defaultMessage:"How to add custom fields"})})]})})},Pn=({attributes:e,forTarget:t,kind:n})=>{const{formatMessage:s}=(0,W.Z)(),i=u("modalForm.tabs.default"),l=u("modalForm.tabs.custom"),d=t.includes("component")?"component":n,c=u(`modalForm.sub-header.chooseAttribute.${d}`);return(0,r.jsx)(ue.f,{padding:7,children:(0,r.jsxs)(be.v,{label:s({id:u("modalForm.tabs.label"),defaultMessage:"Default and Custom types tabs"}),id:"attribute-type-tabs",variant:"simple",children:[(0,r.jsxs)(D.k,{justifyContent:"space-between",children:[(0,r.jsx)(G.Z,{variant:"beta",as:"h2",children:s({id:c,defaultMessage:"Select a field"})}),(0,r.jsxs)(ve.m,{children:[(0,r.jsx)(ve.O,{children:s({id:i,defaultMessage:"Default"})}),(0,r.jsx)(ve.O,{children:s({id:l,defaultMessage:"Custom"})})]})]}),(0,r.jsx)($.x,{paddingBottom:6,children:(0,r.jsx)(xe.i,{})}),(0,r.jsxs)(K.n,{children:[(0,r.jsx)(K.x,{children:(0,r.jsx)(On,{attributes:e})}),(0,r.jsx)(K.x,{children:(0,r.jsx)(Fi,{})})]})]})})};Pn.propTypes={attributes:a.array.isRequired,forTarget:a.string.isRequired,kind:a.string.isRequired};const Ct=({intlLabel:e,name:t,options:n,onChange:s,value:i})=>{const{formatMessage:l}=(0,W.Z)(),d=e.id?l({id:e.id,defaultMessage:e.defaultMessage},{...e.values}):t,c=f=>{let m="";f==="true"&&(m=!0),f==="false"&&(m=!1),s({target:{name:t,value:m,type:"select-default-boolean"}})};return(0,r.jsx)(Ee.P,{label:d,id:t,name:t,onChange:c,value:(i===null?"":i).toString(),children:n.map(({metadatas:{intlLabel:f,disabled:m,hidden:p},key:g,value:x})=>(0,r.jsx)(Ce.W,{value:x,disabled:m,hidden:p,children:f.defaultMessage},g))})};Ct.defaultProps={value:null},Ct.propTypes={intlLabel:a.shape({id:a.string.isRequired,defaultMessage:a.string.isRequired,values:a.object}).isRequired,name:a.string.isRequired,onChange:a.func.isRequired,options:a.arrayOf(a.shape({metadatas:a.shape({intlLabel:a.shape({id:a.string.isRequired,defaultMessage:a.string.isRequired}).isRequired,disabled:a.bool,hidden:a.bool}).isRequired,key:a.oneOfType([a.string,a.number]).isRequired,value:a.oneOfType([a.string,a.number]).isRequired}).isRequired).isRequired,value:a.any};const Li=(0,pe.default)(D.k)`
  position: relative;
  align-items: stretch;

  label {
    border-radius: 4px;
    max-width: 50%;
    cursor: pointer;
    user-select: none;
    flex: 1;
    ${(0,ce.k3)()}
  }

  input {
    position: absolute;
    opacity: 0;
  }

  .option {
    height: 100%;
    border-radius: 4px;
    border: 1px solid ${({theme:e})=>e.colors.neutral200};
    will-change: transform, opacity;
    background: ${({theme:e})=>e.colors.neutral0};

    .checkmark {
      position: relative;
      display: block;
      will-change: transform;
      background: ${({theme:e})=>e.colors.neutral0};
      width: ${({theme:e})=>e.spaces[5]};
      height: ${({theme:e})=>e.spaces[5]};
      border: solid 1px ${({theme:e})=>e.colors.neutral300};
      border-radius: 50%;

      &:before,
      &:after {
        content: '';
        display: block;
        border-radius: 50%;
        width: ${({theme:e})=>e.spaces[3]};
        height: ${({theme:e})=>e.spaces[3]};
        position: absolute;
        top: 3px;
        left: 3px;
      }

      &:after {
        transform: scale(0);
        transition: inherit;
        will-change: transform;
      }
    }
  }

  .container input:checked ~ div {
    background: ${({theme:e})=>e.colors.primary100};
    ${G.Z} {
      color: ${({theme:e})=>e.colors.primary600};
    }
    border: 1px solid ${({theme:e})=>e.colors.primary200};
    .checkmark {
      border: solid 1px ${({theme:e})=>e.colors.primary600};
      &::after {
        background: ${({theme:e})=>e.colors.primary600};
        transform: scale(1);
      }
    }
  }
`,Je=({intlLabel:e,name:t,onChange:n,radios:s,value:i})=>{const{formatMessage:l}=(0,W.Z)();return(0,r.jsxs)(D.k,{direction:"column",alignItems:"stretch",gap:2,children:[(0,r.jsx)(G.Z,{variant:"pi",fontWeight:"bold",textColor:"neutral800",htmlFor:t,as:"label",children:l(e)}),(0,r.jsx)(Li,{gap:4,alignItems:"stretch",children:s.map(d=>(0,r.jsxs)("label",{htmlFor:d.value.toString(),className:"container",children:[(0,r.jsx)("input",{id:d.value.toString(),name:t,className:"option-input",checked:d.value===i,value:d.value,onChange:n,type:"radio"},d.value),(0,r.jsx)($.x,{className:"option",padding:4,children:(0,r.jsxs)(D.k,{children:[(0,r.jsx)($.x,{paddingRight:4,children:(0,r.jsx)("span",{className:"checkmark"})}),(0,r.jsxs)(D.k,{direction:"column",alignItems:"stretch",gap:2,children:[(0,r.jsx)(G.Z,{fontWeight:"bold",children:l(d.title)}),(0,r.jsx)(G.Z,{variant:"pi",textColor:"neutral600",children:l(d.description)})]})]})})]},d.value))})]})};Je.defaultProps={radios:[]},Je.propTypes={intlLabel:a.shape({id:a.string.isRequired,defaultMessage:a.string.isRequired,values:a.object}).isRequired,name:a.string.isRequired,onChange:a.func.isRequired,radios:a.arrayOf(a.shape({title:a.shape({id:a.string.isRequired,defaultMessage:a.string.isRequired}),description:a.shape({id:a.string.isRequired,defaultMessage:a.string.isRequired}),value:a.any.isRequired})),value:a.oneOfType([a.string,a.bool]).isRequired};const In=({onChange:e,name:t,...n})=>{const s=i=>{const l=i.target.value!=="false";e({target:{name:t,value:l,type:"boolean-radio-group"}})};return(0,r.jsx)(Je,{...n,name:t,onChange:s})};In.propTypes={name:a.string.isRequired,onChange:a.func.isRequired};const Mt=({error:e,intlLabel:t,modifiedData:n,name:s,onChange:i,value:l})=>{const{formatMessage:d}=(0,W.Z)(),[c,f]=(0,P.useState)(!!l||l===0),m=t.id?d({id:t.id,defaultMessage:t.defaultMessage},{...t.values}):s,p=n.type==="biginteger"?"text":"number",g=!n.type,x=e?d({id:e,defaultMessage:e}):"";return(0,r.jsxs)(D.k,{direction:"column",alignItems:"stretch",gap:2,children:[(0,r.jsx)(me.X,{id:s,name:s,onValueChange:C=>{i({target:{name:s,value:C?p==="text"?"0":0:null}}),f(O=>!O)},value:c,children:m}),c&&(0,r.jsx)($.x,{paddingLeft:6,style:{maxWidth:"200px"},children:p==="text"?(0,r.jsx)(Ue.o,{"aria-label":m,disabled:g,error:x,id:s,name:s,onChange:i,value:l===null?"":l}):(0,r.jsx)(gt.Y,{"aria-label":m,disabled:g,error:x,id:s,name:s,onValueChange:C=>{i({target:{name:s,value:C,type:p}})},value:l||0})})]})};Mt.defaultProps={error:null,value:null},Mt.propTypes={error:a.string,intlLabel:a.shape({id:a.string.isRequired,defaultMessage:a.string.isRequired,values:a.object}).isRequired,modifiedData:a.object.isRequired,name:a.string.isRequired,onChange:a.func.isRequired,value:a.oneOfType([a.string,a.object,a.bool,a.number])};const Dn=({onChange:e,...t})=>{const n=(0,A.useNotification)(),s=i=>{n({type:"info",message:{id:u("contentType.kind.change.warning"),defaultMessage:"You just changed the kind of a content type: API will be reset (routes, controllers, and services will be overwritten)."}}),e(i)};return(0,r.jsx)(Je,{...t,onChange:s})};Dn.propTypes={onChange:a.func.isRequired};const jt=({description:e,disabled:t,intlLabel:n,isCreating:s,name:i,onChange:l,value:d})=>{const{formatMessage:c}=(0,W.Z)(),[f,m]=(0,P.useState)(!1),p=n.id?c({id:n.id,defaultMessage:n.defaultMessage},{...n.values}):i,g=e?c({id:e.id,defaultMessage:e.defaultMessage},{...e.values}):"",x=()=>m(j=>!j),C=()=>{l({target:{name:i,value:!1}}),x()},h=({target:{checked:j}})=>{if(!j&&!s){x();return}l({target:{name:i,value:j}})};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(me.X,{checked:d,disabled:t,hint:g,name:i,onChange:h,children:p}),(0,r.jsx)(A.ConfirmDialog,{isOpen:f,onToggleDialog:x,onConfirm:C,bodyText:{id:u("popUpWarning.draft-publish.message"),defaultMessage:"If you disable the draft & publish, your drafts will be deleted."},leftButtonText:{id:"components.popUpWarning.button.cancel",defaultMessage:"No, cancel"},rightButtonText:{id:u("popUpWarning.draft-publish.button.confirm"),defaultMessage:"Yes, disable"}})]})};jt.defaultProps={description:null,disabled:!1,value:!1},jt.propTypes={description:a.shape({id:a.string.isRequired,defaultMessage:a.string.isRequired,values:a.object}),disabled:a.bool,intlLabel:a.shape({id:a.string.isRequired,defaultMessage:a.string.isRequired,values:a.object}).isRequired,isCreating:a.bool.isRequired,name:a.string.isRequired,onChange:a.func.isRequired,value:a.bool};const Rt=({categoryName:e,deleteCategory:t,deleteComponent:n,deleteContentType:s,isAttributeModal:i,isCustomFieldModal:l,isComponentAttribute:d,isComponentToDzModal:c,isContentTypeModal:f,isCreatingComponent:m,isCreatingComponentAttribute:p,isCreatingComponentInDz:g,isCreatingComponentWhileAddingAField:x,isCreatingContentType:C,isCreatingDz:h,isComponentModal:j,isDzAttribute:O,isEditingAttribute:T,isEditingCategory:R,isInFirstComponentStep:Z,onSubmitAddComponentAttribute:E,onSubmitAddComponentToDz:z,onSubmitCreateContentType:Y,onSubmitCreateComponent:Q,onSubmitCreateDz:I,onSubmitEditAttribute:ee,onSubmitEditCategory:U,onSubmitEditComponent:w,onSubmitEditContentType:H,onSubmitEditCustomFieldAttribute:J,onSubmitEditDz:Re,onClickFinish:ae})=>{const{formatMessage:V}=(0,W.Z)();return c?g?(0,r.jsx)(X.z,{variant:"secondary",type:"submit",onClick:S=>{S.preventDefault(),z(S,!0)},startIcon:(0,r.jsx)(Ne.Z,{}),children:V({id:u("form.button.add-first-field-to-created-component"),defaultMessage:"Add first field to the component"})}):(0,r.jsx)(X.z,{variant:"default",type:"submit",onClick:S=>{S.preventDefault(),z(S,!1)},children:V({id:"global.finish",defaultMessage:"Finish"})}):i&&O&&!h?(0,r.jsx)(X.z,{variant:"default",type:"submit",onClick:S=>{S.preventDefault(),ae(),Re(S,!1)},children:V({id:"global.finish",defaultMessage:"Finish"})}):i&&O&&h?(0,r.jsx)(r.Fragment,{children:(0,r.jsx)(X.z,{variant:"secondary",type:"submit",onClick:S=>{S.preventDefault(),I(S,!0)},startIcon:(0,r.jsx)(Ne.Z,{}),children:V({id:u("form.button.add-components-to-dynamiczone"),defaultMessage:"Add components to the zone"})})}):i&&d?Z?(0,r.jsx)(X.z,{variant:"secondary",type:"submit",onClick:S=>{S.preventDefault(),E(S,!0)},children:V(p?{id:u("form.button.configure-component"),defaultMessage:"Configure the component"}:{id:u("form.button.select-component"),defaultMessage:"Configure the component"})}):(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(X.z,{variant:"secondary",type:"submit",onClick:S=>{S.preventDefault(),E(S,!0)},startIcon:(0,r.jsx)(Ne.Z,{}),children:V(x?{id:u("form.button.add-first-field-to-created-component"),defaultMessage:"Add first field to the component"}:{id:u("form.button.add-field"),defaultMessage:"Add another field"})}),(0,r.jsx)(X.z,{variant:"default",type:"button",onClick:S=>{S.preventDefault(),ae(),E(S,!1)},children:V({id:"global.finish",defaultMessage:"Finish"})})]}):i&&!d&&!O?(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(X.z,{type:T?"button":"submit",variant:"secondary",onClick:S=>{S.preventDefault(),ee(S,!0)},startIcon:(0,r.jsx)(Ne.Z,{}),children:V({id:u("form.button.add-field"),defaultMessage:"Add another field"})}),(0,r.jsx)(X.z,{type:T?"submit":"button",variant:"default",onClick:S=>{S.preventDefault(),ae(),ee(S,!1)},children:V({id:"global.finish",defaultMessage:"Finish"})})]}):f?(0,r.jsxs)(r.Fragment,{children:[!C&&(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(X.z,{type:"button",variant:"danger",onClick:S=>{S.preventDefault(),s()},children:V({id:"global.delete",defaultMessage:"Delete"})}),(0,r.jsx)(X.z,{type:"submit",variant:"default",onClick:S=>{S.preventDefault(),H(S,!1)},children:V({id:"global.finish",defaultMessage:"Finish"})})]}),C&&(0,r.jsx)(X.z,{type:"submit",variant:"secondary",onClick:S=>{S.preventDefault(),Y(S,!0)},children:V({id:"global.continue",defaultMessage:"Continue"})})]}):j?(0,r.jsxs)(r.Fragment,{children:[!m&&(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(X.z,{type:"button",variant:"danger",onClick:S=>{S.preventDefault(),n()},children:V({id:"global.delete",defaultMessage:"Delete"})}),(0,r.jsx)(X.z,{type:"submit",variant:"default",onClick:S=>{S.preventDefault(),w(S,!1)},children:V({id:"global.finish",defaultMessage:"Finish"})})]}),m&&(0,r.jsx)(X.z,{type:"submit",variant:"secondary",onClick:S=>{S.preventDefault(),Q(S,!0)},children:V({id:"global.continue",defaultMessage:"Continue"})})]}):R?(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(X.z,{type:"button",variant:"danger",onClick:S=>{S.preventDefault(),t(e)},children:V({id:"global.delete",defaultMessage:"Delete"})}),(0,r.jsx)(X.z,{type:"submit",variant:"default",onClick:S=>{S.preventDefault(),U(S)},children:V({id:"global.finish",defaultMessage:"finish"})})]}):l?(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(X.z,{type:T?"button":"submit",variant:"secondary",onClick:S=>{S.preventDefault(),J(S,!0)},startIcon:(0,r.jsx)(Ne.Z,{}),children:V({id:u("form.button.add-field"),defaultMessage:"Add another field"})}),(0,r.jsx)(X.z,{type:T?"submit":"button",variant:"default",onClick:S=>{S.preventDefault(),ae(),J(S,!1)},children:V({id:"global.finish",defaultMessage:"Finish"})})]}):null};Rt.defaultProps={categoryName:null,onClickFinish(){}},Rt.propTypes={categoryName:a.string,deleteCategory:a.func.isRequired,deleteComponent:a.func.isRequired,deleteContentType:a.func.isRequired,isAttributeModal:a.bool.isRequired,isCustomFieldModal:a.bool.isRequired,isComponentAttribute:a.bool.isRequired,isComponentModal:a.bool.isRequired,isComponentToDzModal:a.bool.isRequired,isContentTypeModal:a.bool.isRequired,isCreatingComponent:a.bool.isRequired,isCreatingComponentAttribute:a.bool.isRequired,isCreatingComponentInDz:a.bool.isRequired,isCreatingComponentWhileAddingAField:a.bool.isRequired,isCreatingContentType:a.bool.isRequired,isCreatingDz:a.bool.isRequired,isDzAttribute:a.bool.isRequired,isEditingAttribute:a.bool.isRequired,isEditingCategory:a.bool.isRequired,isInFirstComponentStep:a.bool.isRequired,onSubmitAddComponentAttribute:a.func.isRequired,onSubmitAddComponentToDz:a.func.isRequired,onSubmitCreateContentType:a.func.isRequired,onSubmitCreateComponent:a.func.isRequired,onSubmitCreateDz:a.func.isRequired,onSubmitEditAttribute:a.func.isRequired,onSubmitEditCategory:a.func.isRequired,onSubmitEditComponent:a.func.isRequired,onSubmitEditContentType:a.func.isRequired,onSubmitEditCustomFieldAttribute:a.func.isRequired,onSubmitEditDz:a.func.isRequired,onClickFinish:a.func};const At=({actionType:e,attributeName:t,attributeType:n,categoryName:s,contentTypeKind:i,dynamicZoneTarget:l,forTarget:d,modalType:c,targetUid:f,customFieldUid:m,showBackLink:p})=>{const{formatMessage:g}=(0,W.Z)(),{modifiedData:x}=je(),{onOpenModalAddField:C}=Ie();let h,j=[];const O=x?.[d]?.[f]||x?.[d]||null;let T=O?.schema.displayName;if(c==="contentType"&&(h=i),["component","editCategory"].includes(c)&&(h="component"),["component","contentType"].includes(c)){let Z=u(`modalForm.component.header-${e}`);return c==="contentType"&&(Z=u(`modalForm.${i}.header-create`)),e==="edit"&&(Z=u("modalForm.header-edit")),(0,r.jsx)(Xe.x,{children:(0,r.jsxs)(D.k,{children:[(0,r.jsx)($.x,{children:(0,r.jsx)(De,{type:h})}),(0,r.jsx)($.x,{paddingLeft:3,children:(0,r.jsx)(G.Z,{fontWeight:"bold",textColor:"neutral800",as:"h2",id:"title",children:g({id:Z},{name:T})})})]})})}return j=[{label:T,info:{category:O?.category||null,name:O?.schema.displayName}}],c==="chooseAttribute"&&(h=["component","components"].includes(d)?"component":O.schema.kind),c==="addComponentToDynamicZone"&&(h="dynamiczone",j.push({label:l})),(c==="attribute"||c==="customField")&&(h=n,j.push({label:t})),c==="editCategory"&&(j=[{label:g({id:u("modalForm.header.categories"),defaultMessage:"Categories"})},{label:s}]),(0,r.jsx)(Xe.x,{children:(0,r.jsxs)(D.k,{gap:3,children:[p&&(0,r.jsx)(A.Link,{"aria-label":g({id:u("modalForm.header.back"),defaultMessage:"Back"}),startIcon:(0,r.jsx)(cn.Z,{}),onClick:()=>C({forTarget:d,targetUid:f}),to:"#back"}),(0,r.jsx)(De,{type:h,customField:m}),(0,r.jsx)(Ba.O,{label:j.map(({label:Z})=>Z).join(","),children:j.map(({label:Z,info:E},z,Y)=>{if(Z=Me(Z),!Z)return null;const Q=`${Z}.${z}`;return E?.category&&(Z=`${Z} (${Me(E.category)} - ${Me(E.name)})`),(0,r.jsx)(Wa.$,{isCurrent:z===Y.length-1,children:Z},Q)})})]})})};At.defaultProps={actionType:null,attributeName:null,attributeType:null,categoryName:null,dynamicZoneTarget:null,forTarget:null,contentTypeKind:null,targetUid:null,customFieldUid:null,showBackLink:!1},At.propTypes={actionType:a.string,attributeName:a.string,attributeType:a.string,categoryName:a.string,contentTypeKind:a.string,dynamicZoneTarget:a.string,forTarget:a.oneOf(["contentType","component","components"]),modalType:a.string.isRequired,targetUid:a.string,customFieldUid:a.string,showBackLink:a.bool};const Oi=({modalType:e,forTarget:t,kind:n,actionType:s,step:i})=>{switch(e){case"chooseAttribute":return u(`modalForm.sub-header.chooseAttribute.${t.includes("component")?"component":n||"collectionType"}`);case"attribute":return u(`modalForm.sub-header.attribute.${s}${i!=="null"&&i!==null&&s!=="edit"?".step":""}`);case"customField":return u(`modalForm.sub-header.attribute.${s}`);case"addComponentToDynamicZone":return u("modalForm.sub-header.addComponentToDynamicZone");default:return u("configurations")}},Zt=({actionType:e,modalType:t,forTarget:n,kind:s,step:i,attributeType:l,attributeName:d,customField:c})=>{const{formatMessage:f}=(0,W.Z)(),m=t==="customField"?c.intlLabel:{id:u(`attribute.${l}`)};return(0,r.jsxs)(D.k,{direction:"column",alignItems:"flex-start",paddingBottom:2,gap:1,children:[(0,r.jsx)(G.Z,{as:"h2",variant:"beta",children:f({id:Oi({actionType:e,forTarget:n,kind:s,step:i,modalType:t}),defaultMessage:"Add new field"},{type:Me(f(m)),name:Me(d),step:i})}),(0,r.jsx)(G.Z,{variant:"pi",textColor:"neutral600",children:f({id:u(`attribute.${l}.description`),defaultMessage:"A type for modeling data"})})]})};Zt.defaultProps={actionType:null,modalType:null,forTarget:null,kind:null,step:null,attributeType:null,attributeName:null,customField:null},Zt.propTypes={actionType:a.string,modalType:a.string,forTarget:a.string,kind:a.string,step:a.string,attributeType:a.string,attributeName:a.string,customField:a.object};const St={alien:Va.Z,apps:Ga.Z,archive:wa.Z,arrowDown:Ha.Z,arrowLeft:cn.Z,arrowRight:Ya.Z,arrowUp:Xa.Z,attachment:Qa.Z,bell:Ja.Z,bold:Ka.Z,book:_a.Z,briefcase:es.Z,brush:ts.Z,bulletList:ns.Z,calendar:as.Z,car:ss.Z,cast:rs.Z,chartBubble:is.Z,chartCircle:os.Z,chartPie:ls.Z,check:ds.Z,clock:us.Z,cloud:cs.Z,code:ms.Z,cog:ps.Z,collapse:gs.Z,command:fs.Z,connector:hs.Z,crop:ys.Z,crown:vs.Z,cube:bs.Z,cup:xs.Z,cursor:Ts.Z,dashboard:Cs.Z,database:Ms.Z,discuss:js.Z,doctor:Rs.Z,earth:As.Z,emotionHappy:Zs.Z,emotionUnhappy:Ss.Z,envelop:Ns.Z,exit:Fs.Z,expand:Ls.Z,eye:Os.Z,feather:Es.Z,file:Ps.Z,fileError:Is.Z,filePdf:Ds.Z,filter:$s.Z,folder:qs.Z,gate:ks.Z,gift:zs.Z,globe:Us.Z,grid:Bs.Z,handHeart:Ws.Z,hashtag:Vs.Z,headphone:Gs.Z,heart:ws.Z,house:Hs.Z,information:Ys.Z,italic:Xs.Z,key:Qs.Z,landscape:Js.Z,layer:Ks.Z,layout:_s.Z,lightbulb:er.Z,link:tr.Z,lock:nr.Z,magic:ar.Z,manyToMany:mn.Z,manyToOne:pn.Z,manyWays:gn.Z,medium:sr.Z,message:rr.Z,microphone:ir.Z,monitor:or.Z,moon:lr.Z,music:dr.Z,oneToMany:fn.Z,oneToOne:hn.Z,oneWay:yn.Z,paint:ur.Z,paintBrush:cr.Z,paperPlane:mr.Z,pencil:pr.Z,phone:gr.Z,picture:fr.Z,pin:hr.Z,pinMap:yr.Z,plane:vr.Z,play:br.Z,plus:Ne.Z,priceTag:xr.Z,puzzle:Tr.Z,question:Cr.Z,quote:Mr.Z,repeat:jr.Z,restaurant:Rr.Z,rocket:Ar.Z,rotate:Zr.Z,scissors:Sr.Z,search:vn.Z,seed:Nr.Z,server:Fr.Z,shield:Lr.Z,shirt:Or.Z,shoppingCart:Er.Z,slideshow:Pr.Z,stack:Ir.Z,star:Dr.Z,store:$r.Z,strikeThrough:qr.Z,sun:kr.Z,television:zr.Z,thumbDown:Ur.Z,thumbUp:Br.Z,train:Wr.Z,twitter:Vr.Z,typhoon:Gr.Z,underline:wr.Z,user:Hr.Z,volumeMute:Yr.Z,volumeUp:Xr.Z,walk:Qr.Z,wheelchair:Jr.Z,write:Kr.Z},Ei=(0,pe.default)(D.k)`
  label {
    ${ce.k3}
    border-radius: ${({theme:e})=>e.borderRadius};
    border: 1px solid ${({theme:e})=>e.colors.neutral100};
  }
`,$n=({iconKey:e,name:t,onChange:n,isSelected:s,ariaLabel:i})=>(0,r.jsx)(ba.g,{name:t,required:!1,children:(0,r.jsxs)(xa.Q,{htmlFor:e,id:`${e}-label`,children:[(0,r.jsxs)(Ta.T,{children:[(0,r.jsx)(Ca._,{type:"radio",id:e,name:t,checked:s,onChange:n,value:e,"aria-checked":s,"aria-labelledby":`${e}-label`}),i]}),(0,r.jsx)(D.k,{padding:2,cursor:"pointer",hasRadius:!0,background:s&&"primary200",children:(0,r.jsx)(ye.J,{as:St[e],color:s?"primary600":"neutral300"})})]})});$n.propTypes={iconKey:a.string.isRequired,name:a.string.isRequired,onChange:a.func.isRequired,isSelected:a.bool.isRequired,ariaLabel:a.string.isRequired};const Nt=({intlLabel:e,name:t,onChange:n,value:s})=>{const{formatMessage:i}=(0,W.Z)(),[l,d]=(0,P.useState)(!1),[c,f]=(0,P.useState)(""),m=Object.keys(St),[p,g]=(0,P.useState)(m),x=(0,P.useRef)(null),C=(0,P.useRef)(null),h=()=>{d(!l)},j=({target:{value:R}})=>{f(R),g(()=>m.filter(Z=>Z.toLowerCase().includes(R.toLowerCase())))},O=()=>{h(),f(""),g(m)},T=()=>{n({target:{name:t,value:""}})};return(0,P.useEffect)(()=>{l&&C.current.focus()},[l]),(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)(D.k,{justifyContent:"space-between",paddingBottom:2,children:[(0,r.jsx)(G.Z,{variant:"pi",fontWeight:"bold",textColor:"neutral800",as:"label",children:i(e)}),(0,r.jsxs)(D.k,{gap:1,children:[l?(0,r.jsx)(Ma.w,{ref:C,name:"searchbar",size:"S",placeholder:i({id:u("ComponentIconPicker.search.placeholder"),defaultMessage:"Search for an icon"}),onBlur:()=>{c||h()},onChange:j,value:c,onClear:O,clearLabel:i({id:u("IconPicker.search.clear.label"),defaultMessage:"Clear the icon search"}),children:i({id:u("IconPicker.search.placeholder.label"),defaultMessage:"Search for an icon"})}):(0,r.jsx)(ln.h,{ref:x,onClick:h,"aria-label":i({id:u("IconPicker.search.button.label"),defaultMessage:"Search icon button"}),icon:(0,r.jsx)(vn.Z,{}),noBorder:!0}),s&&(0,r.jsx)(ja.u,{description:i({id:u("IconPicker.remove.tooltip"),defaultMessage:"Remove the selected icon"}),children:(0,r.jsx)(ln.h,{onClick:T,"aria-label":i({id:u("IconPicker.remove.button"),defaultMessage:"Remove the selected icon button"}),icon:(0,r.jsx)(ci.Z,{}),noBorder:!0})})]})]}),(0,r.jsx)(Ei,{position:"relative",padding:1,background:"neutral100",hasRadius:!0,wrap:"wrap",gap:2,maxHeight:"126px",overflow:"auto",textAlign:"center",children:p.length>0?p.map(R=>(0,r.jsx)($n,{iconKey:R,name:t,onChange:n,isSelected:R===s,ariaLabel:i({id:u("IconPicker.icon.label"),defaultMessage:"Select {icon} icon"},{icon:R})},R)):(0,r.jsx)($.x,{padding:4,grow:2,children:(0,r.jsx)(G.Z,{variant:"delta",textColor:"neutral600",textAlign:"center",children:i({id:u("IconPicker.emptyState.label"),defaultMessage:"No icon found"})})})})]})};Nt.defaultProps={value:""},Nt.propTypes={intlLabel:a.object.isRequired,name:a.string.isRequired,onChange:a.func.isRequired,value:a.string};const Ft=({description:e,error:t,intlLabel:n,modifiedData:s,name:i,onChange:l,value:d})=>{const{formatMessage:c}=(0,W.Z)(),f=(0,P.useRef)(l),m=s?.displayName||"";(0,P.useEffect)(()=>{if(m){const C=(0,b.n)(m);try{const h=yt(C,2);f.current({target:{name:i,value:h}})}catch{f.current({target:{name:i,value:C}})}}else f.current({target:{name:i,value:""}})},[m,i]);const p=t?c({id:t,defaultMessage:t}):"",g=e?c({id:e.id,defaultMessage:e.defaultMessage},{...e.values}):"",x=c(n);return(0,r.jsx)(Ue.o,{error:p,label:x,id:i,hint:g,name:i,onChange:l,value:d||""})};Ft.defaultProps={description:null,error:null,value:null},Ft.propTypes={description:a.shape({id:a.string.isRequired,defaultMessage:a.string.isRequired,values:a.object}),error:a.string,intlLabel:a.shape({id:a.string.isRequired,defaultMessage:a.string.isRequired,values:a.object}).isRequired,modifiedData:a.object.isRequired,name:a.string.isRequired,onChange:a.func.isRequired,value:a.string};const Lt=({oneThatIsCreatingARelationWithAnother:e,target:t})=>{const{contentTypes:n,sortedContentTypesList:s}=je(),i=(0,Pe.useDispatch)(),l=s.filter(Nn),{plugin:d=null,schema:{displayName:c}={displayName:"error"}}=n?.[t]??{},f=({uid:m,plugin:p,title:g,restrictRelationsTo:x})=>()=>{const C=p?`${p}_${g}`:g;i({type:b.O,target:{value:m,oneThatIsCreatingARelationWithAnother:e,selectedContentTypeFriendlyName:C,targetContentTypeAllowedRelations:x}})};return(0,r.jsxs)(st.fC,{children:[(0,r.jsx)(Pi,{children:`${c} ${d?`(from: ${d})`:""}`}),(0,r.jsx)(st.VY,{zIndex:5,children:l.map(({uid:m,title:p,restrictRelationsTo:g,plugin:x})=>(0,r.jsxs)(st.ck,{onSelect:f({uid:m,plugin:x,title:p,restrictRelationsTo:g}),children:[p,"\xA0",x&&(0,r.jsxs)(r.Fragment,{children:["(from: ",x,")"]})]},m))})]})};Lt.defaultProps={target:null},Lt.propTypes={oneThatIsCreatingARelationWithAnother:a.string.isRequired,target:a.string};const Pi=(0,pe.default)(st.xz)`
  svg {
    width: ${6/16}rem;
    height: ${4/16}rem;
  }
`,it=({disabled:e,error:t,header:n,isMain:s,name:i,onChange:l,oneThatIsCreatingARelationWithAnother:d,target:c,value:f})=>(0,r.jsxs)($.x,{background:"neutral100",hasRadius:!0,borderColor:"neutral200",children:[(0,r.jsx)(D.k,{paddingTop:s?4:1,paddingBottom:s?3:1,justifyContent:"center",children:s?(0,r.jsx)(G.Z,{variant:"pi",fontWeight:"bold",textColor:"neutral800",children:n}):(0,r.jsx)(Lt,{target:c,oneThatIsCreatingARelationWithAnother:d})}),(0,r.jsx)(xe.i,{background:"neutral200"}),(0,r.jsx)($.x,{padding:4,children:(0,r.jsx)(A.GenericInput,{disabled:e,error:t?.id||null,intlLabel:{id:u("form.attribute.item.defineRelation.fieldName"),defaultMessage:"Field name"},name:i,onChange:l,type:"text",value:f})})]});it.defaultProps={disabled:!1,error:null,header:null,isMain:!1,onChange(){},oneThatIsCreatingARelationWithAnother:null,target:null,value:""},it.propTypes={disabled:a.bool,error:a.object,header:a.string,isMain:a.bool,name:a.string.isRequired,onChange:a.func,oneThatIsCreatingARelationWithAnother:a.string,target:a.string,value:a.string};const Ii=(0,pe.default)($.x)`
  position: relative;
  width: 100%;
  &::before {
    content: '';
    position: absolute;
    top: calc(50% - 0px);
    height: 2px;
    width: 100%;
    background-color: ${({theme:e})=>e.colors.primary600};
    z-index: 0;
  }
`,Di=(0,pe.default)($.x)`
  background: ${({theme:e,isSelected:t})=>e.colors[t?"primary100":"neutral0"]};
  border: 1px solid
    ${({theme:e,isSelected:t})=>e.colors[t?"primary700":"neutral200"]};
  border-radius: ${({theme:e})=>e.borderRadius};
  z-index: 1;
  svg {
    width: 1.5rem;
    height: 100%;
    path {
      fill: ${({theme:e,isSelected:t})=>e.colors[t?"primary700":"neutral500"]};
    }
  }
  &:disabled {
    cursor: not-allowed;
  }
`,$i=(0,pe.default)(D.k)`
  position: absolute;
  bottom: 0;
  left: 0;
  right: 0;
`,qi={oneWay:yn.Z,oneToOne:hn.Z,oneToMany:fn.Z,manyToOne:pn.Z,manyToMany:mn.Z,manyWay:gn.Z},Ot=({naturePickerType:e,oneThatIsCreatingARelationWithAnother:t,relationType:n,target:s})=>{const i=(0,Pe.useDispatch)(),{formatMessage:l}=(0,W.Z)(),{contentTypes:d,modifiedData:c}=je(),f=["oneWay","oneToOne","oneToMany","manyToOne","manyToMany","manyWay"],m=["oneWay","manyWay"],g=(e==="contentType"?L(c,[e,"schema","kind"],""):e)==="collectionType"?f:m,x=n==="manyToOne",C=L(d,[s,"schema","displayName"],"unknown"),h=x?C:t,j=x?t:C,O=yt(h,n==="manyToMany"?2:1),T=L(d,[s,"schema","restrictRelationsTo"],null),R=yt(j,["manyToMany","oneToMany","manyToOne","manyWay"].includes(n)?2:1);return n?(0,r.jsxs)(D.k,{style:{flex:1},children:[(0,r.jsx)(Ii,{children:(0,r.jsx)(D.k,{paddingLeft:9,paddingRight:9,paddingTop:1,justifyContent:"center",children:(0,r.jsx)(ke.k,{tagName:"button",children:(0,r.jsx)(D.k,{gap:3,children:g.map(Z=>{const E=qi[Z],z=T===null||T.includes(Z);return(0,r.jsx)(Di,{as:"button",isSelected:n===Z,disabled:!z,onClick:()=>{z&&i({type:b.a,target:{oneThatIsCreatingARelationWithAnother:t,targetContentType:s,value:Z}})},padding:2,type:"button",children:(0,r.jsx)(E,{},Z)},Z)})})})})}),(0,r.jsxs)($i,{justifyContent:"center",children:[(0,r.jsxs)(G.Z,{children:[Rn(O,{length:24}),"\xA0"]}),(0,r.jsxs)(G.Z,{textColor:"primary600",children:[l({id:u(`relation.${n}`)}),"\xA0"]}),(0,r.jsx)(G.Z,{children:Rn(R,{length:24})})]})]}):null};Ot.defaultProps={relationType:null,target:null},Ot.propTypes={naturePickerType:a.string.isRequired,oneThatIsCreatingARelationWithAnother:a.string.isRequired,relationType:a.string,target:a.string};const qn=({formErrors:e,mainBoxHeader:t,modifiedData:n,naturePickerType:s,onChange:i})=>{const l=(0,b.g)(n.relation,n.targetAttribute);return(0,r.jsxs)(D.k,{style:{position:"relative"},children:[(0,r.jsx)(it,{isMain:!0,header:t,error:e?.name||null,name:"name",onChange:i,value:n?.name||""}),(0,r.jsx)(Ot,{naturePickerType:s,oneThatIsCreatingARelationWithAnother:t,relationType:l,target:n.target}),(0,r.jsx)(it,{disabled:["oneWay","manyWay"].includes(l),error:e?.targetAttribute||null,name:"targetAttribute",onChange:i,oneThatIsCreatingARelationWithAnother:t,target:n.target,value:n?.targetAttribute||""})]})};qn.propTypes={formErrors:a.object.isRequired,mainBoxHeader:a.string.isRequired,modifiedData:a.object.isRequired,naturePickerType:a.string.isRequired,onChange:a.func.isRequired};const Et=({error:e,intlLabel:t,name:n,onChange:s,value:i})=>{const{formatMessage:l}=(0,W.Z)(),{allComponentsCategories:d}=je(),[c,f]=(0,P.useState)(d),m=e?l({id:e,defaultMessage:e}):"",p=l(t),g=C=>{s({target:{name:n,value:C,type:"select-category"}})},x=C=>{f(h=>[...h,C]),g(C)};return(0,r.jsx)(Ra.XU,{error:m,id:n,label:p,name:n,onChange:g,onCreateOption:x,value:i,children:c.map(C=>(0,r.jsx)(Aa.O,{value:C,children:C},C))})};Et.defaultProps={error:null,value:null},Et.propTypes={error:a.string,intlLabel:a.shape({id:a.string.isRequired,defaultMessage:a.string.isRequired,values:a.object}).isRequired,name:a.string.isRequired,onChange:a.func.isRequired,value:a.string};const Pt=({error:e,intlLabel:t,isAddingAComponentToAnotherComponent:n,isCreating:s,isCreatingComponentWhileAddingAField:i,componentToCreate:l,name:d,onChange:c,targetUid:f,forTarget:m,value:p})=>{const{formatMessage:g}=(0,W.Z)(),x=e?g({id:e,defaultMessage:e}):"",C=g(t),{componentsGroupedByCategory:h,componentsThatHaveOtherComponentInTheirAttributes:j}=je(),O=["component","components"].includes(m);let T=Object.entries(h).reduce((R,Z)=>{const[E,z]=Z,Y=z.map(Q=>({uid:Q.uid,label:Q.schema.displayName,categoryName:E}));return[...R,...Y]},[]);return n&&(T=T.filter(R=>!j.includes(R.uid))),O&&(T=T.filter(R=>R.uid!==f)),i&&(T=[{uid:p,label:l.displayName,categoryName:l.category}]),(0,r.jsx)(Ee.P,{disabled:i||!s,error:x,label:C,id:d,name:d,onChange:R=>{c({target:{name:d,value:R,type:"select-category"}})},value:p||"",children:T.map(R=>(0,r.jsx)(Ce.W,{value:R.uid,children:`${R.categoryName} - ${R.label}`},R.uid))})};Pt.defaultProps={componentToCreate:null,error:null},Pt.propTypes={componentToCreate:a.object,forTarget:a.string.isRequired,error:a.string,intlLabel:a.shape({id:a.string.isRequired,defaultMessage:a.string.isRequired,values:a.object}).isRequired,isAddingAComponentToAnotherComponent:a.bool.isRequired,isCreating:a.bool.isRequired,isCreatingComponentWhileAddingAField:a.bool.isRequired,name:a.string.isRequired,onChange:a.func.isRequired,targetUid:a.string.isRequired,value:a.string.isRequired};const kn=({dynamicZoneTarget:e,intlLabel:t,name:n,onChange:s,value:i})=>{const{formatMessage:l}=(0,W.Z)(),{componentsGroupedByCategory:d,modifiedData:c}=je(),m=(bt(c.contentType.schema.attributes,e)||{}).components||[],p=Object.keys(d).reduce((C,h)=>{const j=d[h].filter(({uid:O})=>!m.includes(O));return j.length>0&&(C[h]=j),C},{}),g=Object.entries(p).reduce((C,h)=>{const[j,O]=h,T={label:j,children:O.map(({uid:R,schema:{displayName:Z}})=>({label:Z,value:R}))};return C.push(T),C},[]),x=l({id:u("components.SelectComponents.displayed-value"),defaultMessage:"{number, plural, =0 {# components} one {# component} other {# components}} selected"},{number:i.length});return(0,r.jsx)(at.Q,{id:"select1",label:l(t),customizeContent:()=>x,name:n,onChange:C=>{s({target:{name:n,value:C,type:"select-components"}})},options:g,value:i||[]})};kn.propTypes={intlLabel:a.shape({id:a.string.isRequired,defaultMessage:a.string.isRequired,values:a.object}).isRequired,dynamicZoneTarget:a.string.isRequired,name:a.string.isRequired,onChange:a.func.isRequired,value:a.array.isRequired};const It=({intlLabel:e,error:t,modifiedData:n,name:s,onChange:i,options:l,value:d})=>{const{formatMessage:c}=(0,W.Z)(),f=c(e),m=t?c({id:t,defaultMessage:t}):"",p=g=>{i({target:{name:s,value:g,type:"select"}}),d&&n.default!==void 0&&n.default!==null&&i({target:{name:"default",value:null}})};return(0,r.jsx)(Ee.P,{error:m,label:f,id:s,name:s,onChange:p,value:d||"",children:l.map(({metadatas:{intlLabel:g,disabled:x,hidden:C},key:h,value:j})=>(0,r.jsx)(Ce.W,{value:j,disabled:x,hidden:C,children:c({id:g.id,defaultMessage:g.defaultMessage},g.values)},h))})};It.defaultProps={error:void 0,value:""},It.propTypes={error:a.string,intlLabel:a.shape({id:a.string.isRequired,defaultMessage:a.string.isRequired,values:a.object}).isRequired,modifiedData:a.object.isRequired,name:a.string.isRequired,onChange:a.func.isRequired,options:a.arrayOf(a.shape({metadatas:a.shape({intlLabel:a.shape({id:a.string.isRequired,defaultMessage:a.string.isRequired}).isRequired,disabled:a.bool,hidden:a.bool}).isRequired,key:a.oneOfType([a.string,a.number]).isRequired,value:a.oneOfType([a.string,a.number]).isRequired}).isRequired).isRequired,value:a.string};const Dt=({intlLabel:e,error:t,modifiedData:n,name:s,onChange:i,options:l,value:d})=>{const{formatMessage:c}=(0,W.Z)(),f=c(e),m=t?c({id:t,defaultMessage:t}):"",p=g=>{i({target:{name:s,value:g,type:"select"}}),d&&(g==="biginteger"&&d!=="biginteger"&&(n.default!==void 0&&n.default!==null&&i({target:{name:"default",value:null}}),n.max!==void 0&&n.max!==null&&i({target:{name:"max",value:null}}),n.min!==void 0&&n.min!==null&&i({target:{name:"min",value:null}})),["decimal","float","integer"].includes(g)&&d==="biginteger"&&(n.default!==void 0&&n.default!==null&&i({target:{name:"default",value:null}}),n.max!==void 0&&n.max!==null&&i({target:{name:"max",value:null}}),n.min!==void 0&&n.min!==null&&i({target:{name:"min",value:null}})))};return(0,r.jsx)(Ee.P,{error:m,label:f,id:s,name:s,onChange:p,value:d||"",children:l.map(({metadatas:{intlLabel:g,disabled:x,hidden:C},key:h,value:j})=>(0,r.jsx)(Ce.W,{value:j,disabled:x,hidden:C,children:c(g)},h))})};Dt.defaultProps={error:void 0,value:""},Dt.propTypes={error:a.string,intlLabel:a.shape({id:a.string.isRequired,defaultMessage:a.string.isRequired,values:a.object}).isRequired,modifiedData:a.object.isRequired,name:a.string.isRequired,onChange:a.func.isRequired,options:a.arrayOf(a.shape({metadatas:a.shape({intlLabel:a.shape({id:a.string.isRequired,defaultMessage:a.string.isRequired}).isRequired,disabled:a.bool,hidden:a.bool}).isRequired,key:a.oneOfType([a.string,a.number]).isRequired,value:a.oneOfType([a.string,a.number]).isRequired}).isRequired).isRequired,value:a.string};const $t=({description:e,error:t,intlLabel:n,modifiedData:s,name:i,onChange:l,value:d})=>{const{formatMessage:c}=(0,W.Z)(),f=(0,P.useRef)(l),m=s?.displayName||"";(0,P.useEffect)(()=>{m?f.current({target:{name:i,value:(0,b.n)(m)}}):f.current({target:{name:i,value:""}})},[m,i]);const p=t?c({id:t,defaultMessage:t}):"",g=e?c({id:e.id,defaultMessage:e.defaultMessage},{...e.values}):"",x=c(n);return(0,r.jsx)(Ue.o,{error:p,label:x,id:i,hint:g,name:i,onChange:l,value:d||""})};$t.defaultProps={description:null,error:null,value:null},$t.propTypes={description:a.shape({id:a.string.isRequired,defaultMessage:a.string.isRequired,values:a.object}),error:a.string,intlLabel:a.shape({id:a.string.isRequired,defaultMessage:a.string.isRequired,values:a.object}).isRequired,modifiedData:a.object.isRequired,name:a.string.isRequired,onChange:a.func.isRequired,value:a.string};const qt=({form:e,formErrors:t,genericInputProps:n,modifiedData:s,onChange:i})=>{const{formatMessage:l}=(0,W.Z)();return e.map((d,c)=>d.items.length===0?null:(0,r.jsxs)($.x,{children:[d.sectionTitle&&(0,r.jsx)($.x,{paddingBottom:4,children:(0,r.jsx)(G.Z,{variant:"delta",as:"h3",children:l(d.sectionTitle)})}),(0,r.jsx)(Ye.r,{gap:4,children:d.items.map((f,m)=>{const p=`${c}.${m}`,g=L(s,f.name,void 0),x=Object.keys(t).find(h=>h===f.name),C=x?t[x].id:L(t,[...f.name.split(".").filter(h=>h!=="componentToCreate"),"id"],null);return f.type==="pushRight"?(0,r.jsx)(ze.P,{col:f.size||6,children:(0,r.jsx)("div",{})},f.name||p):(0,r.jsx)(ze.P,{col:f.size||6,children:(0,r.jsx)(A.GenericInput,{...f,...n,error:C,onChange:i,value:g})},f.name||p)})})]},c))};qt.propTypes={form:a.arrayOf(a.object).isRequired,formErrors:a.object.isRequired,genericInputProps:a.object.isRequired,modifiedData:a.object.isRequired,onChange:a.func.isRequired};const kt=({description:e,disabled:t,error:n,intlLabel:s,labelAction:i,name:l,onChange:d,placeholder:c,value:f})=>{const{formatMessage:m}=(0,W.Z)(),p=n?m({id:n,defaultMessage:n}):"",g=e?m({id:e.id,defaultMessage:e.defaultMessage},{...e.values}):"",x=m(s),C=c?m({id:c.id,defaultMessage:c.defaultMessage},{...c.values}):"",h=Array.isArray(f)?f.join(`
`):"",j=O=>{const T=O.target.value.split(`
`);d({target:{name:l,value:T}})};return(0,r.jsx)(Za.g,{disabled:t,error:p,label:x,labelAction:i,id:l,hint:g,name:l,onChange:j,placeholder:C,value:h,children:h})};kt.defaultProps={description:null,disabled:!1,error:"",labelAction:void 0,placeholder:null,value:""},kt.propTypes={description:a.shape({id:a.string.isRequired,defaultMessage:a.string.isRequired,values:a.object}),disabled:a.bool,error:a.string,intlLabel:a.shape({id:a.string.isRequired,defaultMessage:a.string.isRequired,values:a.object}).isRequired,labelAction:a.element,name:a.string.isRequired,onChange:a.func.isRequired,placeholder:a.shape({id:a.string.isRequired,defaultMessage:a.string.isRequired,values:a.object}),value:a.oneOfType([a.array,a.string])};const Te={name:"name",type:"text",intlLabel:{id:"global.name",defaultMessage:"Name"},description:{id:u("modalForm.attribute.form.base.name.description"),defaultMessage:"No space is allowed for the name of the attribute"}},ki={sections:[{sectionTitle:null,items:[Te]}]},zt={intlLabel:{id:"global.type",defaultMessage:"Type"},name:"createComponent",type:"boolean-radio-group",size:12,radios:[{title:{id:u("form.attribute.component.option.create"),defaultMessage:"Create a new component"},description:{id:u("form.attribute.component.option.create.description"),defaultMessage:"A component is shared across types and components, it will be available and accessible everywhere."},value:!0},{title:{id:u("form.attribute.component.option.reuse-existing"),defaultMessage:"Use an existing component"},description:{id:u("form.attribute.component.option.reuse-existing.description"),defaultMessage:"Reuse a component already created to keep your data consistent across content-types."},value:!1}]},zn=/^[A-Za-z][-_0-9A-Za-z]*$/,zi=e=>{const t={name:M.Z_().matches(zn,A.translatedErrors.regex).test({name:"nameNotAllowed",message:A.translatedErrors.unique,test(n){return n?!e.includes(n?.toLowerCase()):!1}}).required(A.translatedErrors.required)};return M.Ry(t)},Ui={base:{sections:[{sectionTitle:null,items:[{autoFocus:!0,name:"name",type:"text",intlLabel:{id:"global.name",defaultMessage:"Name"},description:{id:u("modalForm.editCategory.base.name.description"),defaultMessage:"No space is allowed for the name of the category"}}]}]}},Bi=(e,t,n)=>{const s={displayName:M.Z_().test({name:"nameAlreadyUsed",message:A.translatedErrors.unique,test(i){if(!i)return!1;const l=(0,b.c)(i,n);return!e.includes(l)}}).test({name:"nameNotAllowed",message:u("error.contentTypeName.reserved-name"),test(i){return i?!t.includes(i?.trim()?.toLowerCase()):!1}}).required(A.translatedErrors.required),category:M.Z_().matches(zn,A.translatedErrors.regex).required(A.translatedErrors.required),icon:M.Z_()};return M.Ry(s)},Be={base(e=""){return[{sectionTitle:null,items:[{name:`${e}displayName`,type:"text",intlLabel:{id:u("contentType.displayName.label"),defaultMessage:"Display Name"}},{name:`${e}category`,type:"select-category",intlLabel:{id:u("modalForm.components.create-component.category.label"),defaultMessage:"Select a category or enter a name to create a new one"}}]},{sectionTitle:null,items:[{name:`${e}icon`,type:"icon-picker",size:12,intlLabel:{id:u("modalForm.components.icon.label"),defaultMessage:"Icon"}}]}]},advanced(){return[]}},N={default:{name:"default",type:"text",intlLabel:{id:u("form.attribute.settings.default"),defaultMessage:"Default value"}},max:{name:"max",type:"checkbox-with-number-field",intlLabel:{id:u("form.attribute.item.maximum"),defaultMessage:"Maximum value"}},maxLength:{name:"maxLength",type:"checkbox-with-number-field",intlLabel:{id:u("form.attribute.item.maximumLength"),defaultMessage:"Maximum length"}},min:{name:"min",type:"checkbox-with-number-field",intlLabel:{id:u("form.attribute.item.minimum"),defaultMessage:"Minimum value"}},minLength:{name:"minLength",type:"checkbox-with-number-field",intlLabel:{id:u("form.attribute.item.minimumLength"),defaultMessage:"Minimum length"}},private:{name:"private",type:"checkbox",intlLabel:{id:u("form.attribute.item.privateField"),defaultMessage:"Private field"},description:{id:u("form.attribute.item.privateField.description"),defaultMessage:"This field will not show up in the API response"}},regex:{intlLabel:{id:u("form.attribute.item.text.regex"),defaultMessage:"RegExp pattern"},name:"regex",type:"text",description:{id:u("form.attribute.item.text.regex.description"),defaultMessage:"The text of the regular expression"}},required:{name:"required",type:"checkbox",intlLabel:{id:u("form.attribute.item.requiredField"),defaultMessage:"Required field"},description:{id:u("form.attribute.item.requiredField.description"),defaultMessage:"You won't be able to create an entry if this field is empty"}},unique:{name:"unique",type:"checkbox",intlLabel:{id:u("form.attribute.item.uniqueField"),defaultMessage:"Unique field"},description:{id:u("form.attribute.item.uniqueField.description"),defaultMessage:"You won't be able to create an entry if there is an existing entry with identical content"}}},Un={advanced:{blocks(){return{sections:[{sectionTitle:{id:"global.settings",defaultMessage:"Settings"},items:[N.required,N.private]}]}},boolean(){return{sections:[{sectionTitle:null,items:[{autoFocus:!0,type:"select-default-boolean",intlLabel:{id:u("form.attribute.settings.default"),defaultMessage:"Default value"},name:"default",options:[{value:"true",key:"true",metadatas:{intlLabel:{id:"true",defaultMessage:"true"}}},{value:"",key:"null",metadatas:{intlLabel:{id:"null",defaultMessage:"null"}}},{value:"false",key:"false",metadatas:{intlLabel:{id:"false",defaultMessage:"false"}}}]}]},{sectionTitle:{id:"global.settings",defaultMessage:"Settings"},items:[N.required,N.private]}]}},component({repeatable:e},t){return t==="1"?{sections:Be.advanced("componentToCreate")}:e?{sections:[{sectionTitle:{id:"global.settings",defaultMessage:"Settings"},items:[N.required,N.private,N.max,N.min]}]}:{sections:[{sectionTitle:{id:"global.settings",defaultMessage:"Settings"},items:[N.required,N.private]}]}},date({type:e}){return{sections:[{sectionTitle:null,items:[{...N.default,type:e||"date",value:null,withDefaultValue:!1,disabled:!e,autoFocus:!1}]},{sectionTitle:{id:"global.settings",defaultMessage:"Settings"},items:[N.required,N.unique,N.private]}]}},dynamiczone(){return{sections:[{sectionTitle:{id:"global.settings",defaultMessage:"Settings"},items:[N.required,N.max,N.min]}]}},email(){return{sections:[{sectionTitle:null,items:[{...N.default,type:"email"}]},{sectionTitle:{id:"global.settings",defaultMessage:"Settings"},items:[N.required,N.unique,N.maxLength,N.minLength,N.private]}]}},enumeration(e){return{sections:[{sectionTitle:null,items:[{name:"default",type:"select",intlLabel:{id:u("form.attribute.settings.default"),defaultMessage:"Default value"},validations:{},options:[{key:"__null_reset_value__",value:"",metadatas:{intlLabel:{id:"components.InputSelect.option.placeholder",defaultMessage:"Choose here"}}},...(e.enum||[]).filter((t,n)=>e.enum.indexOf(t)===n&&t).map(t=>({key:t,value:t,metadatas:{intlLabel:{id:`${t}.no-override`,defaultMessage:t}}}))]},{intlLabel:{id:u("form.attribute.item.enumeration.graphql"),defaultMessage:"Name override for GraphQL"},name:"enumName",type:"text",validations:{},description:{id:u("form.attribute.item.enumeration.graphql.description"),defaultMessage:"Allows you to override the default generated name for GraphQL"}}]},{sectionTitle:{id:"global.settings",defaultMessage:"Settings"},items:[N.required,N.private]}]}},json(){return{sections:[{sectionTitle:{id:"global.settings",defaultMessage:"Settings"},items:[N.required,N.private]}]}},media(){return{sections:[{sectionTitle:null,items:[{intlLabel:{id:u("form.attribute.media.allowed-types"),defaultMessage:"Select allowed types of media"},name:"allowedTypes",type:"allowed-types-select",size:7,value:"",validations:{}}]},{sectionTitle:{id:"global.settings",defaultMessage:"Settings"},items:[N.required,N.private]}]}},number(e){const t=e.type==="decimal"||e.type==="float"?"any":1;return{sections:[{sectionTitle:null,items:[{autoFocus:!0,name:"default",type:e.type==="biginteger"?"text":"number",step:t,intlLabel:{id:u("form.attribute.settings.default"),defaultMessage:"Default value"},validations:{}}]},{sectionTitle:{id:"global.settings",defaultMessage:"Settings"},items:[N.required,N.unique,N.max,N.min,N.private]}]}},password(){return{sections:[{sectionTitle:null,items:[N.default]},{sectionTitle:{id:"global.settings",defaultMessage:"Settings"},items:[N.required,N.maxLength,N.minLength,N.private]}]}},relation(){return{sections:[{sectionTitle:{id:"global.settings",defaultMessage:"Settings"},items:[N.private]}]}},richtext(){return{sections:[{sectionTitle:null,items:[N.default]},{sectionTitle:{id:"global.settings",defaultMessage:"Settings"},items:[N.required,N.maxLength,N.minLength,N.private]}]}},text(){return{sections:[{sectionTitle:null,items:[N.default,N.regex]},{sectionTitle:{id:"global.settings",defaultMessage:"Settings"},items:[N.required,N.unique,N.maxLength,N.minLength,N.private]}]}},uid(e){return{sections:[{sectionTitle:null,items:[{...N.default,disabled:Boolean(e.targetField),type:"text"}]},{sectionTitle:{id:"global.settings",defaultMessage:"Settings"},items:[N.required,N.maxLength,N.minLength,N.private]}]}}},base:{component(e,t){if(t==="1"){const n=e.createComponent===!0?Be.base("componentToCreate."):[];return{sections:[{sectionTitle:null,items:[zt]},...n]}}return{sections:[{sectionTitle:null,items:[Te,{name:"component",type:"select-component",intlLabel:{id:u("modalForm.attributes.select-component"),defaultMessage:"Select a component"},isMultiple:!1}]},{sectionTitle:null,items:[{intlLabel:{id:"global.type",defaultMessage:"Type"},name:"repeatable",type:"boolean-radio-group",size:12,radios:[{title:{id:u("form.attribute.component.option.repeatable"),defaultMessage:"Repeatable component"},description:{id:u("form.attribute.component.option.repeatable.description"),defaultMessage:"Best for multiple instances (array) of ingredients, meta tags, etc.."},value:!0},{title:{id:u("form.attribute.component.option.single"),defaultMessage:"Single component"},description:{id:u("form.attribute.component.option.single.description"),defaultMessage:"Best for grouping fields like full address, main information, etc..."},value:!1}]}]}]}},date(){return{sections:[{sectionTitle:null,items:[Te,{intlLabel:{id:"global.type",defaultMessage:"Type"},name:"type",type:"select-date",options:[{key:"__null_reset_value__",value:"",metadatas:{intlLabel:{id:"components.InputSelect.option.placeholder",defaultMessage:"Choose here"},hidden:!0}},{key:"date",value:"date",metadatas:{intlLabel:{id:u("form.attribute.item.date.type.date"),defaultMessage:"date (ex: 01/01/{currentYear})",values:{currentYear:new Date().getFullYear()}}}},{key:"datetime",value:"datetime",metadatas:{intlLabel:{id:u("form.attribute.item.date.type.datetime"),defaultMessage:"datetime (ex: 01/01/{currentYear} 00:00 AM)",values:{currentYear:new Date().getFullYear()}}}},{key:"time",value:"time",metadatas:{intlLabel:{id:u("form.attribute.item.date.type.time"),defaultMessage:"time (ex: 00:00 AM)"}}}]}]}]}},enumeration(){return{sections:[{sectionTitle:null,items:[Te]},{sectionTitle:null,items:[{name:"enum",type:"textarea-enum",size:6,intlLabel:{id:u("form.attribute.item.enumeration.rules"),defaultMessage:"Values (one line per value)"},placeholder:{id:u("form.attribute.item.enumeration.placeholder"),defaultMessage:`Ex:
morning
noon
evening`},validations:{required:!0}}]}]}},media(){return{sections:[{sectionTitle:null,items:[Te]},{sectionTitle:null,items:[{intlLabel:{id:"global.type",defaultMessage:"Type"},name:"multiple",size:12,type:"boolean-radio-group",radios:[{title:{id:u("form.attribute.media.option.multiple"),defaultMessage:"Multiple media"},description:{id:u("form.attribute.media.option.multiple.description"),defaultMessage:"Best for sliders, carousels or multiple files download"},value:!0},{title:{id:u("form.attribute.media.option.single"),defaultMessage:"Single media"},description:{id:u("form.attribute.media.option.single.description"),defaultMessage:"Best for avatar, profile picture or cover"},value:!1}]}]}]}},number(){return{sections:[{sectionTitle:null,items:[Te,{intlLabel:{id:u("form.attribute.item.number.type"),defaultMessage:"Number format"},name:"type",type:"select-number",options:[{key:"__null_reset_value__",value:"",metadatas:{intlLabel:{id:"components.InputSelect.option.placeholder",defaultMessage:"Choose here"},hidden:!0}},{key:"integer",value:"integer",metadatas:{intlLabel:{id:u("form.attribute.item.number.type.integer"),defaultMessage:"integer (ex: 10)"}}},{key:"biginteger",value:"biginteger",metadatas:{intlLabel:{id:u("form.attribute.item.number.type.biginteger"),defaultMessage:"biginteger (ex: 123456789)"}}},{key:"decimal",value:"decimal",metadatas:{intlLabel:{id:u("form.attribute.item.number.type.decimal"),defaultMessage:"decimal (ex: 2.22)"}}},{key:"float",value:"float",metadatas:{intlLabel:{id:u("form.attribute.item.number.type.float"),defaultMessage:"decimal (ex: 3.3333333)"}}}]}]}]}},relation(){return{sections:[{sectionTitle:null,items:[{intlLabel:{id:"FIXME",defaultMessage:"FIXME"},name:"relation",size:12,type:"relation"}]}]}},string(){return{sections:[{sectionTitle:null,items:[Te]},{sectionTitle:null,items:[{intlLabel:{id:"global.type",defaultMessage:"Type"},name:"type",size:12,type:"radio-group",radios:[{title:{id:u("form.attribute.text.option.short-text"),defaultMessage:"Sort text"},description:{id:u("form.attribute.text.option.short-text.description"),defaultMessage:"Best for titles, names, links (URL). It also enables exact search on the field."},value:"string"},{title:{id:u("form.attribute.text.option.long-text"),defaultMessage:"Long text"},description:{id:u("form.attribute.text.option.long-text.description"),defaultMessage:"Best for descriptions, biography. Exact search is disabled."},value:"text"}]}]}]}},text(){return{sections:[{sectionTitle:null,items:[Te]},{sectionTitle:null,items:[{intlLabel:{id:"global.type",defaultMessage:"Type"},name:"type",size:12,type:"radio-group",radios:[{title:{id:u("form.attribute.text.option.short-text"),defaultMessage:"Sort text"},description:{id:u("form.attribute.text.option.short-text.description"),defaultMessage:"Best for titles, names, links (URL). It also enables exact search on the field."},value:"string"},{title:{id:u("form.attribute.text.option.long-text"),defaultMessage:"Long text"},description:{id:u("form.attribute.text.option.long-text.description"),defaultMessage:"Best for descriptions, biography. Exact search is disabled."},value:"text"}]}]}]}},uid(e,t,n){const s=n.filter(({type:i})=>["string","text"].includes(i)).map(({name:i})=>({key:i,value:i,metadatas:{intlLabel:{id:`${i}.no-override`,defaultMessage:i}}}));return{sections:[{sectionTitle:null,items:[{...Te,placeholder:{id:u("modalForm.attribute.form.base.name.placeholder"),defaultMessage:"e.g. slug, seoUrl, canonicalUrl"}},{intlLabel:{id:u("modalForm.attribute.target-field"),defaultMessage:"Attached field"},name:"targetField",type:"select",options:[{key:"__null_reset_value__",value:"",metadatas:{intlLabel:{id:"global.none",defaultMessage:"None"}}},...s]}]}]}}}},Ut=e=>hi(e,{decamelize:!1,lowercase:!1,separator:"_"}),Bn=/^[A-Za-z][_0-9A-Za-z]*$/,Wn=e=>({name:"attributeNameAlreadyUsed",message:A.translatedErrors.unique,test(t){return t?!e.includes(t):!1}}),Bt=e=>({name:"forbiddenAttributeName",message:u("error.attributeName.reserved-name"),test(t){return t?!e.includes(t):!1}}),y={default:()=>M.Z_().nullable(),max:()=>M.Rx().integer().nullable(),min:()=>M.Rx().integer().when("max",(e,t)=>e?t.max(e,u("error.validation.minSupMax")):t).nullable(),maxLength:()=>M.Rx().integer().positive(u("error.validation.positive")).nullable(),minLength:()=>M.Rx().integer().min(0).when("maxLength",(e,t)=>e?t.max(e,u("error.validation.minSupMax")):t).nullable(),name(e,t){return M.Z_().test(Wn(e)).test(Bt(t)).matches(Bn,A.translatedErrors.regex).required(A.translatedErrors.required)},required:()=>M.O7(),type:()=>M.Z_().required(A.translatedErrors.required),unique:()=>M.O7().nullable()},Wt=(e,t)=>({name:y.name(e,t),type:y.type(),default:y.default(),unique:y.unique(),required:y.required(),maxLength:y.maxLength(),minLength:y.minLength(),regex:M.Z_().test({name:"isValidRegExpPattern",message:u("error.validation.regex"),test(s){return new RegExp(s)!==null}}).nullable()}),Vt={name:"isMinSuperiorThanMax",message:u("error.validation.minSupMax"),test(e){if(!e)return!0;const{max:t}=this.parent;return!t||Number.isNaN(vt(e))?!0:vt(t)>=vt(e)}},Gt={date(e,t){const n={name:y.name(e,t),type:y.type()};return M.Ry(n)},datetime(e,t){const n={name:y.name(e,t),type:y.type()};return M.Ry(n)},time(e,t){const n={name:y.name(e,t),type:y.type()};return M.Ry(n)},default(e,t){const n={name:y.name(e,t),type:y.type()};return M.Ry(n)},biginteger(e,t){const n={name:y.name(e,t),type:y.type(),default:M.Z_().nullable().matches(/^-?\d*$/),unique:y.unique(),required:y.required(),max:M.Z_().nullable().matches(/^-?\d*$/,A.translatedErrors.regex),min:M.Z_().nullable().test(Vt).matches(/^-?\d*$/,A.translatedErrors.regex)};return M.Ry(n)},boolean(e,t){const n={name:y.name(e,t),default:M.O7().nullable(),required:y.required(),unique:y.unique()};return M.Ry(n)},component(e,t){const n={name:y.name(e,t),type:y.type(),required:y.required(),max:y.max(),min:y.min(),component:M.Z_().required(A.translatedErrors.required)};return M.Ry(n)},decimal(e,t){const n={name:y.name(e,t),type:y.type(),default:M.Rx(),required:y.required(),max:M.Rx(),min:M.Rx().test(Vt)};return M.Ry(n)},dynamiczone(e,t){const n={name:y.name(e,t),type:y.type(),required:y.required(),max:y.max(),min:y.min()};return M.Ry(n)},email(e,t){const n={name:y.name(e,t),type:y.type(),default:M.Z_().email().nullable(),unique:y.unique(),required:y.required(),maxLength:y.maxLength(),minLength:y.minLength()};return M.Ry(n)},enumeration(e,t){const n=/^[_A-Za-z][_0-9A-Za-z]*$/,s={name:M.Z_().test(Wn(e)).test(Bt(t)).matches(n,A.translatedErrors.regex).required(A.translatedErrors.required),type:y.type(),default:y.default(),unique:y.unique(),required:y.required(),enum:M.IX().of(M.Z_()).min(1,A.translatedErrors.min).test({name:"areEnumValuesUnique",message:u("error.validation.enum-duplicate"),test(i){return!yi(i.map(Ut).filter((d,c,f)=>f.indexOf(d)!==c)).length}}).test({name:"doesNotHaveEmptyValues",message:u("error.validation.enum-empty-string"),test:i=>!i.map(Ut).some(l=>l==="")}).test({name:"doesMatchRegex",message:u("error.validation.enum-regex"),test:i=>i.map(Ut).every(l=>n.test(l))}),enumName:M.Z_().nullable()};return M.Ry(s)},float(e,t){const n={name:y.name(e,t),type:y.type(),required:y.required(),default:M.Rx(),max:M.Rx(),min:M.Rx().test(Vt)};return M.Ry(n)},integer(e,t){const n={name:y.name(e,t),type:y.type(),default:M.Rx().integer(),unique:y.unique(),required:y.required(),max:y.max(),min:y.min()};return M.Ry(n)},json(e,t){const n={name:y.name(e,t),type:y.type(),required:y.required(),unique:y.unique()};return M.Ry(n)},media(e,t){const n={name:y.name(e,t),type:y.type(),multiple:M.O7(),required:y.required(),allowedTypes:M.IX().of(M.Z_().oneOf(["images","videos","files","audios"])).min(1).nullable()};return M.Ry(n)},password(e,t){const n={name:y.name(e,t),type:y.type(),default:y.default(),unique:y.unique(),required:y.required(),maxLength:y.maxLength(),minLength:y.minLength()};return M.Ry(n)},relation(e,t,n,{initialData:s,modifiedData:i}){const l={name:y.name(e,t),target:M.Z_().required(A.translatedErrors.required),relation:M.Z_().required(),type:M.Z_().required(),targetAttribute:M.Vo(()=>{const d=(0,b.g)(i.relation,i.targetAttribute);if(d==="oneWay"||d==="manyWay")return M.Z_().nullable();let c=M.Z_().test(Bt(t)),m=[...n.map(({name:p})=>p),i.name].filter(p=>p!==s.targetAttribute);return c.matches(Bn,A.translatedErrors.regex).test({name:"forbiddenTargetAttributeName",message:u("error.validation.relation.targetAttribute-taken"),test(p){return p?!m.includes(p):!1}}).required(A.translatedErrors.required)})};return M.Ry(l)},richtext(e,t){const n={name:y.name(e,t),type:y.type(),default:y.default(),unique:y.unique(),required:y.required(),maxLength:y.maxLength(),minLength:y.minLength()};return M.Ry(n)},blocks(e,t){const n={name:y.name(e,t),type:y.type(),default:y.default(),unique:y.unique(),required:y.required(),maxLength:y.maxLength(),minLength:y.minLength()};return M.Ry(n)},string(e,t){const n=Wt(e,t);return M.Ry(n)},text(e,t){const n=Wt(e,t);return M.Ry(n)},uid(e,t){const n=Wt(e,t);return M.Ry(n)}},Wi=({usedContentTypeNames:e=[],reservedModels:t=[],singularNames:n=[],pluralNames:s=[],collectionNames:i=[]})=>{const l={displayName:M.Z_().test({name:"nameAlreadyUsed",message:A.translatedErrors.unique,test(d){if(!d)return!1;const c=(0,b.b)(d);return!e.includes(c)}}).test({name:"nameNotAllowed",message:u("error.contentTypeName.reserved-name"),test(d){return d?!t.includes(d?.trim()?.toLowerCase()):!1}}).required(A.translatedErrors.required),pluralName:M.Z_().test({name:"pluralNameAlreadyUsed",message:A.translatedErrors.unique,test(d){return d?!s.includes(d):!1}}).test({name:"pluralNameAlreadyUsedAsSingular",message:u("error.contentType.pluralName-equals-singularName"),test(d){return d?!n.includes(d):!1}}).test({name:"pluralAndSingularAreUnique",message:u("error.contentType.pluralName-used"),test(d,c){return d?c.parent.singularName!==d:!1}}).test({name:"pluralNameNotAllowed",message:u("error.contentTypeName.reserved-name"),test(d){return d?!t.includes(d?.trim()?.toLowerCase()):!1}}).test({name:"pluralNameNotAlreadyUsedInCollectionName",message:u("error.contentType.pluralName-equals-collectionName"),test(d){return d?!i.includes(d?.trim()?.toLowerCase()):!1}}).required(A.translatedErrors.required),singularName:M.Z_().test({name:"singularNameAlreadyUsed",message:A.translatedErrors.unique,test(d){return d?!n.includes(d):!1}}).test({name:"singularNameAlreadyUsedAsPlural",message:u("error.contentType.singularName-equals-pluralName"),test(d){return d?!s.includes(d):!1}}).test({name:"pluralAndSingularAreUnique",message:u("error.contentType.singularName-used"),test(d,c){return d?c.parent.pluralName!==d:!1}}).test({name:"singularNameNotAllowed",message:u("error.contentTypeName.reserved-name"),test(d){return d?!t.includes(d?.trim()?.toLowerCase()):!1}}).required(A.translatedErrors.required),draftAndPublish:M.O7(),kind:M.Z_().oneOf(["singleType","collectionType"]),reviewWorkflows:M.O7()};return M.Ry(l)},Vn={name:"displayName",type:"text",intlLabel:{id:u("contentType.displayName.label"),defaultMessage:"Display name"}},wt={advanced:{default(){return{sections:[{items:[{intlLabel:{id:u("contentType.draftAndPublish.label"),defaultMessage:"Draft & publish"},description:{id:u("contentType.draftAndPublish.description"),defaultMessage:"Allows writing a draft version of an entry, before it is published"},name:"draftAndPublish",type:"toggle-draft-publish",validations:{}}]}]}}},base:{create(){return{sections:[{sectionTitle:null,items:[Vn,{description:{id:u("contentType.apiId-singular.description"),defaultMessage:"Used to generate the API routes and databases tables/collections"},intlLabel:{id:u("contentType.apiId-singular.label"),defaultMessage:"API ID (Singular)"},name:"singularName",type:"text-singular"},{type:"pushRight",size:6,intlLabel:{id:"",defaultMessage:""},name:"pushRight"},{description:{id:u("contentType.apiId-plural.description"),defaultMessage:"Pluralized API ID"},intlLabel:{id:u("contentType.apiId-plural.label"),defaultMessage:"API ID (Plural)"},name:"pluralName",type:"text-plural"}]}]}},edit(){return{sections:[{sectionTitle:null,items:[Vn,{disabled:!0,description:{id:u("contentType.apiId-singular.description"),defaultMessage:"Used to generate the API routes and databases tables/collections"},intlLabel:{id:u("contentType.apiId-singular.label"),defaultMessage:"API ID (Singular)"},name:"singularName",type:"text"},{type:"pushRight",size:6,intlLabel:{id:"",defaultMessage:""},name:"pushRight"},{disabled:!0,description:{id:u("contentType.apiId-plural.description"),defaultMessage:"Pluralized API ID"},intlLabel:{id:u("contentType.apiId-plural.label"),defaultMessage:"API ID (Plural)"},name:"pluralName",type:"text"},{intlLabel:{id:"global.type",defaultMessage:"Type"},name:"kind",type:"content-type-radio-group",size:12,radios:[{title:{id:u("form.button.collection-type.name"),defaultMessage:"Collection Type"},description:{id:u("form.button.collection-type.description"),defaultMessage:"Best for multiple instances like articles, products, comments, etc."},value:"collectionType"},{title:{id:u("form.button.single-type.name"),defaultMessage:"Single Type"},description:{id:u("form.button.single-type.description"),defaultMessage:"Best for single instance like about us, homepage, etc."},value:"singleType"}]}]}]}}}},Ht={advanced:{default(){return{sections:Be.advanced("componentToCreate.")}}},base:{createComponent(){return{sections:[{sectionTitle:null,items:[zt]},...Be.base("componentToCreate.")]}},default(){return{sections:[{sectionTitle:null,items:[zt]},{sectionTitle:null,items:[{type:"pushRight",size:6,intlLabel:{id:"",defaultMessage:""},name:"pushRight"},{name:"components",type:"select-components",intlLabel:{id:u("modalForm.attributes.select-components"),defaultMessage:"Select the components"},isMultiple:!0}]}]}}}},Gn=(e,t)=>{e.forEach(n=>{if(!("sectionTitle"in n)){t[0].items.push(n);return}t.push(n)})},wn=(e,t)=>e.filter(({name:n})=>n!==t.initialData.name).map(({name:n})=>n),Fe={customField:{schema({schemaAttributes:e,attributeType:t,customFieldValidator:n,reservedNames:s,schemaData:i,ctbFormsAPI:l}){const d=wn(e,i),c=Gt[t](d,s.attributes);return l.makeCustomFieldValidator(c,n,d,s.attributes,i)},form:{base({customField:e}){const t=[{sectionTitle:null,items:[Te]}];return e.options?.base&&Gn(e.options.base,t),{sections:t}},advanced({customField:e,data:t,step:n,extensions:s,...i}){const l=[{sectionTitle:null,items:[]}],d=s.getAdvancedForm(["attribute",e.type],{data:t,type:e.type,step:n,...i});if(e.options?.advanced&&Gn(e.options.advanced,l),d){const c={sectionTitle:{id:u("modalForm.custom-fields.advanced.settings.extended"),defaultMessage:"Extended settings"},items:d};l.push(c)}return{sections:l}}}},attribute:{schema(e,t,n,s,i,l){const d=e?.schema?.attributes??[],c=wn(d,i);try{let f=Gt[t](c,n.attributes,s,i);return l.makeValidator(["attribute",t],f,c,n.attributes,s,i)}catch(f){return console.error("Error yup build schema",f),Gt.default(c,n.attributes)}},form:{advanced({data:e,type:t,step:n,extensions:s,...i}){try{const l=Un.advanced[t](e,n).sections,d=s.getAdvancedForm(["attribute",t],{data:e,type:t,step:n,...i});return{sections:l.reduce((f,m)=>(m.sectionTitle===null?f.push(m):f.push({...m,items:[...m.items,...d]}),f),[])}}catch(l){return console.error(l),{sections:[]}}},base({data:e,type:t,step:n,attributes:s}){try{return Un.base[t](e,n,s)}catch{return ki}}}},contentType:{schema(e,t,n,s,i,l){const d=Object.values(l).map(h=>h.schema.singularName),c=Object.values(l).map(h=>h?.schema?.pluralName??""),f=t?e.filter(h=>h!==n):e,m=t?d.filter(h=>{const{schema:j}=l[n];return j.singularName!==h}):d,p=t?c.filter(h=>{const{schema:j}=l[n];return j.pluralName!==h}):c,g=Object.values(l).map(h=>h?.schema?.collectionName??""),x=t?g.filter(h=>{const{schema:j}=l[n],O=j.pluralName,T=j.collectionName;return h!==O||h!==T}):g,C=Wi({usedContentTypeNames:f,reservedModels:s.models,singularNames:m,pluralNames:p,collectionNames:x});return i.makeValidator(["contentType"],C,f,s.models,m,p)},form:{base({actionType:e}){return e==="create"?wt.base.create():wt.base.edit()},advanced({extensions:e}){const t=wt.advanced.default().sections.map(s=>s.items).flat(),n=e.getAdvancedForm(["contentType"]);return{sections:[{items:[...t,...n]}]}}}},component:{schema(e,t,n,s=!1,i=null){const l=s?e.filter(d=>d!==i):e;return Bi(l,n.models,t)},form:{advanced(){return{sections:Be.advanced()}},base(){return{sections:Be.base()}}}},addComponentToDynamicZone:{form:{advanced(){return Ht.advanced.default()},base({data:e}){return e?.createComponent??!1?Ht.base.createComponent():Ht.base.default()}}},editCategory:{schema(e,t){const n=e.filter(s=>s!==t.name).map(s=>s.toLowerCase());return zi(n)},form:{advanced:()=>({sections:[]}),base(){return Ui.base}}}};var ot="NOT_FOUND";function Vi(e){var t;return{get:function(s){return t&&e(t.key,s)?t.value:ot},put:function(s,i){t={key:s,value:i}},getEntries:function(){return t?[t]:[]},clear:function(){t=void 0}}}function Gi(e,t){var n=[];function s(c){var f=n.findIndex(function(p){return t(c,p.key)});if(f>-1){var m=n[f];return f>0&&(n.splice(f,1),n.unshift(m)),m.value}return ot}function i(c,f){s(c)===ot&&(n.unshift({key:c,value:f}),n.length>e&&n.pop())}function l(){return n}function d(){n=[]}return{get:s,put:i,getEntries:l,clear:d}}var wi=function(t,n){return t===n};function Hi(e){return function(n,s){if(n===null||s===null||n.length!==s.length)return!1;for(var i=n.length,l=0;l<i;l++)if(!e(n[l],s[l]))return!1;return!0}}function Yi(e,t){var n=typeof t=="object"?t:{equalityCheck:t},s=n.equalityCheck,i=s===void 0?wi:s,l=n.maxSize,d=l===void 0?1:l,c=n.resultEqualityCheck,f=Hi(i),m=d===1?Vi(f):Gi(d,f);function p(){var g=m.get(arguments);if(g===ot){if(g=e.apply(null,arguments),c){var x=m.getEntries(),C=x.find(function(h){return c(h.value,g)});C&&(g=C.value)}m.put(arguments,g)}return g}return p.clearCache=function(){return m.clear()},p}function Xi(e){var t=Array.isArray(e[0])?e[0]:e;if(!t.every(function(s){return typeof s=="function"})){var n=t.map(function(s){return typeof s=="function"?"function "+(s.name||"unnamed")+"()":typeof s}).join(", ");throw new Error("createSelector expects all input-selectors to be functions, but received the following types: ["+n+"]")}return t}function Qi(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),s=1;s<t;s++)n[s-1]=arguments[s];var i=function(){for(var d=arguments.length,c=new Array(d),f=0;f<d;f++)c[f]=arguments[f];var m=0,p,g={memoizeOptions:void 0},x=c.pop();if(typeof x=="object"&&(g=x,x=c.pop()),typeof x!="function")throw new Error("createSelector expects an output function after the inputs, but received: ["+typeof x+"]");var C=g,h=C.memoizeOptions,j=h===void 0?n:h,O=Array.isArray(j)?j:[j],T=Xi(c),R=e.apply(void 0,[function(){return m++,x.apply(null,arguments)}].concat(O)),Z=e(function(){for(var z=[],Y=T.length,Q=0;Q<Y;Q++)z.push(T[Q].apply(null,arguments));return p=R.apply(null,z),p});return Object.assign(Z,{resultFunc:x,memoizedResultFunc:R,dependencies:T,lastResult:function(){return p},recomputations:function(){return m},resetRecomputations:function(){return m=0}}),Z};return i}var Hn=Qi(Yi),Yn=globalThis&&globalThis.__extends||function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(s,i){s.__proto__=i}||function(s,i){for(var l in i)Object.prototype.hasOwnProperty.call(i,l)&&(s[l]=i[l])},e(t,n)};return function(t,n){if(typeof n!="function"&&n!==null)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");e(t,n);function s(){this.constructor=t}t.prototype=n===null?Object.create(n):(s.prototype=n.prototype,new s)}}(),Ji=globalThis&&globalThis.__generator||function(e,t){var n={label:0,sent:function(){if(l[0]&1)throw l[1];return l[1]},trys:[],ops:[]},s,i,l,d;return d={next:c(0),throw:c(1),return:c(2)},typeof Symbol=="function"&&(d[Symbol.iterator]=function(){return this}),d;function c(m){return function(p){return f([m,p])}}function f(m){if(s)throw new TypeError("Generator is already executing.");for(;n;)try{if(s=1,i&&(l=m[0]&2?i.return:m[0]?i.throw||((l=i.return)&&l.call(i),0):i.next)&&!(l=l.call(i,m[1])).done)return l;switch(i=0,l&&(m=[m[0]&2,l.value]),m[0]){case 0:case 1:l=m;break;case 4:return n.label++,{value:m[1],done:!1};case 5:n.label++,i=m[1],m=[0];continue;case 7:m=n.ops.pop(),n.trys.pop();continue;default:if(l=n.trys,!(l=l.length>0&&l[l.length-1])&&(m[0]===6||m[0]===2)){n=0;continue}if(m[0]===3&&(!l||m[1]>l[0]&&m[1]<l[3])){n.label=m[1];break}if(m[0]===6&&n.label<l[1]){n.label=l[1],l=m;break}if(l&&n.label<l[2]){n.label=l[2],n.ops.push(m);break}l[2]&&n.ops.pop(),n.trys.pop();continue}m=t.call(e,n)}catch(p){m=[6,p],i=0}finally{s=l=0}if(m[0]&5)throw m[1];return{value:m[0]?m[1]:void 0,done:!0}}},lt=globalThis&&globalThis.__spreadArray||function(e,t){for(var n=0,s=t.length,i=e.length;n<s;n++,i++)e[i]=t[n];return e},Ki=Object.defineProperty,_i=Object.defineProperties,eo=Object.getOwnPropertyDescriptors,Xn=Object.getOwnPropertySymbols,to=Object.prototype.hasOwnProperty,no=Object.prototype.propertyIsEnumerable,Qn=function(e,t,n){return t in e?Ki(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n},Ke=function(e,t){for(var n in t||(t={}))to.call(t,n)&&Qn(e,n,t[n]);if(Xn)for(var s=0,i=Xn(t);s<i.length;s++){var n=i[s];no.call(t,n)&&Qn(e,n,t[n])}return e},Yt=function(e,t){return _i(e,eo(t))},ao=function(e,t,n){return new Promise(function(s,i){var l=function(f){try{c(n.next(f))}catch(m){i(m)}},d=function(f){try{c(n.throw(f))}catch(m){i(m)}},c=function(f){return f.done?s(f.value):Promise.resolve(f.value).then(l,d)};c((n=n.apply(e,t)).next())})};function We(e,t){function n(){for(var s=[],i=0;i<arguments.length;i++)s[i]=arguments[i];if(t){var l=t.apply(void 0,s);if(!l)throw new Error("prepareAction did not return an object");return Ke(Ke({type:e,payload:l.payload},"meta"in l&&{meta:l.meta}),"error"in l&&{error:l.error})}return{type:e,payload:s[0]}}return n.toString=function(){return""+e},n.type=e,n.match=function(s){return s.type===e},n}(function(e){Yn(t,e);function t(){for(var n=[],s=0;s<arguments.length;s++)n[s]=arguments[s];var i=e.apply(this,n)||this;return Object.setPrototypeOf(i,t.prototype),i}return Object.defineProperty(t,Symbol.species,{get:function(){return t},enumerable:!1,configurable:!0}),t.prototype.concat=function(){for(var n=[],s=0;s<arguments.length;s++)n[s]=arguments[s];return e.prototype.concat.apply(this,n)},t.prototype.prepend=function(){for(var n=[],s=0;s<arguments.length;s++)n[s]=arguments[s];return n.length===1&&Array.isArray(n[0])?new(t.bind.apply(t,lt([void 0],n[0].concat(this)))):new(t.bind.apply(t,lt([void 0],n.concat(this))))},t})(Array),function(e){Yn(t,e);function t(){for(var n=[],s=0;s<arguments.length;s++)n[s]=arguments[s];var i=e.apply(this,n)||this;return Object.setPrototypeOf(i,t.prototype),i}return Object.defineProperty(t,Symbol.species,{get:function(){return t},enumerable:!1,configurable:!0}),t.prototype.concat=function(){for(var n=[],s=0;s<arguments.length;s++)n[s]=arguments[s];return e.prototype.concat.apply(this,n)},t.prototype.prepend=function(){for(var n=[],s=0;s<arguments.length;s++)n[s]=arguments[s];return n.length===1&&Array.isArray(n[0])?new(t.bind.apply(t,lt([void 0],n[0].concat(this)))):new(t.bind.apply(t,lt([void 0],n.concat(this))))},t}(Array);var so="ModuleSymbhasOwnPr-0123456789ABCDEFGHNRVfgctiUvz_KqYTJkLxpZXIjQW",ro=function(e){e===void 0&&(e=21);for(var t="",n=e;n--;)t+=so[Math.random()*64|0];return t},io=["name","message","stack","code"],Xt=function(){function e(t,n){this.payload=t,this.meta=n}return e}(),Jn=function(){function e(t,n){this.payload=t,this.meta=n}return e}(),oo=function(e){if(typeof e=="object"&&e!==null){for(var t={},n=0,s=io;n<s.length;n++){var i=s[n];typeof e[i]=="string"&&(t[i]=e[i])}return t}return{message:String(e)}};(function(){function e(t,n,s){var i=We(t+"/fulfilled",function(p,g,x,C){return{payload:p,meta:Yt(Ke({},C||{}),{arg:x,requestId:g,requestStatus:"fulfilled"})}}),l=We(t+"/pending",function(p,g,x){return{payload:void 0,meta:Yt(Ke({},x||{}),{arg:g,requestId:p,requestStatus:"pending"})}}),d=We(t+"/rejected",function(p,g,x,C,h){return{payload:C,error:(s&&s.serializeError||oo)(p||"Rejected"),meta:Yt(Ke({},h||{}),{arg:x,requestId:g,rejectedWithValue:!!C,requestStatus:"rejected",aborted:p?.name==="AbortError",condition:p?.name==="ConditionError"})}}),c=!1,f=typeof AbortController<"u"?AbortController:function(){function p(){this.signal={aborted:!1,addEventListener:function(){},dispatchEvent:function(){return!1},onabort:function(){},removeEventListener:function(){},reason:void 0,throwIfAborted:function(){}}}return p.prototype.abort=function(){},p}();function m(p){return function(g,x,C){var h=s?.idGenerator?s.idGenerator(p):ro(),j=new f,O;function T(Z){O=Z,j.abort()}var R=function(){return ao(this,null,function(){var Z,E,z,Y,Q,I,ee;return Ji(this,function(U){switch(U.label){case 0:return U.trys.push([0,4,,5]),Y=(Z=s?.condition)==null?void 0:Z.call(s,p,{getState:x,extra:C}),uo(Y)?[4,Y]:[3,2];case 1:Y=U.sent(),U.label=2;case 2:if(Y===!1||j.signal.aborted)throw{name:"ConditionError",message:"Aborted due to condition callback returning false."};return Q=new Promise(function(w,H){return j.signal.addEventListener("abort",function(){return H({name:"AbortError",message:O||"Aborted"})})}),g(l(h,p,(E=s?.getPendingMeta)==null?void 0:E.call(s,{requestId:h,arg:p},{getState:x,extra:C}))),[4,Promise.race([Q,Promise.resolve(n(p,{dispatch:g,getState:x,extra:C,requestId:h,signal:j.signal,abort:T,rejectWithValue:function(w,H){return new Xt(w,H)},fulfillWithValue:function(w,H){return new Jn(w,H)}})).then(function(w){if(w instanceof Xt)throw w;return w instanceof Jn?i(w.payload,h,p,w.meta):i(w,h,p)})])];case 3:return z=U.sent(),[3,5];case 4:return I=U.sent(),z=I instanceof Xt?d(null,h,p,I.payload,I.meta):d(I,h,p),[3,5];case 5:return ee=s&&!s.dispatchConditionRejection&&d.match(z)&&z.meta.condition,ee||g(z),[2,z]}})})}();return Object.assign(R,{abort:T,requestId:h,arg:p,unwrap:function(){return R.then(lo)}})}}return Object.assign(m,{pending:l,rejected:d,fulfilled:i,typePrefix:t})}return e.withTypes=function(){return e},e})();function lo(e){if(e.meta&&e.meta.rejectedWithValue)throw e.payload;if(e.error)throw e.error;return e.payload}function uo(e){return e!==null&&typeof e=="object"&&typeof e.then=="function"}var Qt="listenerMiddleware";We(Qt+"/add"),We(Qt+"/removeAll"),We(Qt+"/remove");var Kn;typeof queueMicrotask=="function"&&queueMicrotask.bind(typeof window<"u"?window:typeof global<"u"?global:globalThis),(0,vi.pV)();const co=()=>e=>e[`${b.p}_formModal`]||b.i,mo=()=>Hn(co(),e=>e),po=(e,t)=>{const n=L(e,["contentType","schema","kind"],"");return n==="singleType"||n===t.kind?!0:L(e,["contentType","schema","attributes"],[]).filter(({relation:l,type:d,targetAttribute:c})=>{const f=(0,b.g)(l,c);return d==="relation"&&!["oneWay","manyWay"].includes(f)}).length===0},go=(e="",t,n)=>{const s=["text","boolean","blocks","json","number","email","date","password","media","enumeration","relation","richtext"],i=e==="contentType",l=n.includes(t),d=!i&&!l;return i?[[...s.slice(0,-1),"uid",...s.slice(-1)],["component","dynamiczone"]]:d?[s,["component"]]:[s]},_n=e=>e.reduce((t,n)=>{const s=n.items.reduce((i,l)=>(l.name&&i.push(l.name),i),[]);return[...t,...s]},[]),fo=()=>{const{onCloseModal:e,onNavigateToChooseAttributeModal:t,onNavigateToAddCompoToDZModal:n,onNavigateToCreateComponentStep2:s,actionType:i,attributeName:l,attributeType:d,customFieldUid:c,categoryName:f,dynamicZoneTarget:m,forTarget:p,modalType:g,isOpen:x,showBackLink:C,kind:h,step:j,targetUid:O}=Ie(),T=(0,A.useCustomFields)().get(c),R=(0,P.useRef)(),Z=(0,P.useMemo)(mo,[]),E=(0,Pe.useDispatch)(),z=(0,A.useNotification)(),Y=(0,Pe.useSelector)(k=>Z(k),Pe.shallowEqual),{push:Q}=(0,oe.k6)(),{trackUsage:I}=(0,A.useTracking)(),{formatMessage:ee}=(0,W.Z)(),{getPlugin:U}=(0,A.useStrapiApp)(),H=U(b.p).apis.forms,J=H.components.inputs,{addAttribute:Re,addCustomFieldAttribute:ae,addCreatedComponentToDynamicZone:V,allComponentsCategories:S,changeDynamicZoneComponents:Jt,contentTypes:Ve,components:et,createSchema:Ge,deleteCategory:Kt,deleteData:ut,editCategory:_t,editCustomFieldAttribute:en,submitData:tn,modifiedData:se,nestedComponents:nn,setModifiedData:an,sortedContentTypesList:sn,updateSchema:ct,reservedNames:Le}=je(),{componentToCreate:tt,formErrors:Ae,initialData:te,isCreatingComponentWhileAddingAField:nt,modifiedData:v}=Y,F=p==="contentType"||p==="component"?[p]:[p,O];(0,P.useEffect)(()=>{if(x){const k=sn.filter(Nn);g==="editCategory"&&an(),i==="edit"&&g==="attribute"&&p==="contentType"&&I("willEditFieldOfContentType");const de=[...F,"schema","attributes"],fe=bt(L(se,de,[]),m)||null;if(g==="editCategory"&&i==="edit"&&E({type:b.S,modalType:g,actionType:i,data:{name:f}}),g==="contentType"&&i==="create"&&E({type:b.S,modalType:g,actionType:i,data:{draftAndPublish:!0},pluginOptions:{}}),g==="contentType"&&i==="edit"){const{displayName:B,draftAndPublish:ne,kind:he,pluginOptions:ie,pluralName:Yo,reviewWorkflows:Xo,singularName:Qo}=L(se,[...F,"schema"],{displayName:null,pluginOptions:{},singularName:null,pluralName:null});E({type:b.S,actionType:i,modalType:g,data:{displayName:B,draftAndPublish:ne,kind:he,pluginOptions:ie,pluralName:Yo,reviewWorkflows:Xo??!1,singularName:Qo}})}if(g==="component"&&i==="edit"){const B=L(se,F,{});E({type:b.S,actionType:i,modalType:g,data:{displayName:B.schema.displayName,category:B.category,icon:B.schema.icon}})}if(g==="addComponentToDynamicZone"&&i==="edit"){const B={...fe,components:[],name:m,createComponent:!1,componentToCreate:{type:"component"}};E({type:b.d,attributeToEdit:B})}if(d){const ne={...bt(L(se,de,[]),l),name:l};d==="component"&&i==="edit"&&(ne.repeatable||Mn(ne,"repeatable",!1)),E(g==="customField"?{type:b.e,customField:T,isEditing:i==="edit",modifiedDataToSetForEditing:ne,forTarget:p}:{type:b.f,attributeType:d,nameToSetForRelation:L(k,["0","title"],"error"),targetUid:L(k,["0","uid"],"error"),isEditing:i==="edit",modifiedDataToSetForEditing:ne,step:j,forTarget:p})}}else E({type:b.R})},[i,l,d,f,m,p,x,g]);const q=g==="contentType",_=g==="component",re=g==="attribute",le=g==="customField",Ze=d==="component"&&re,$e=i==="create",Oe=L(v,"createComponent",!1)||nt,we=j==="1",ca=g==="editCategory",ma=g==="chooseAttribute",rn=(0,b.b)(v.displayName||""),on=L(se,[...F,"schema","attributes"],null),Po=async()=>{let k;const de=Oe&&j==="1"?L(v,"componentToCreate",{}):v;if(q)k=Fe.contentType.schema(Object.keys(Ve),i==="edit",L(se,[...F,"uid"],null),Le,H,Ve);else if(_)k=Fe.component.schema(Object.keys(et),v.category||"",Le,i==="edit",L(se,[...F,"uid"],null),H);else if(le)k=Fe.customField.schema({schemaAttributes:L(se,[...F,"schema","attributes"],[]),attributeType:T.type,reservedNames:Le,schemaData:{modifiedData:v,initialData:te},ctbFormsAPI:H,customFieldValidator:T.options?.validator});else if(Ze&&Oe&&we)k=Fe.component.schema(Object.keys(et),L(v,"componentToCreate.category",""),Le,H);else if(re&&!we){const fe=d==="relation"?"relation":v.type;let B=[];if(fe==="relation"){const ne=L(v,["target"],null);B=L(Ve,[ne,"schema","attributes"],[]).filter(({name:ie})=>i!=="edit"?!0:ie!==te.targetAttribute)}k=Fe.attribute.schema(L(se,F,{}),fe,Le,B,{modifiedData:v,initialData:te},H)}else if(ca)k=Fe.editCategory.schema(S,te,H);else if(we&&Oe)k=Fe.component.schema(Object.keys(et),L(v,"componentToCreate.category",""),Le,H);else return;await k.validate(de,{abortEarly:!1})},pa=(0,P.useCallback)(({target:{name:k,value:de,type:fe,...B}})=>{const ne=["enumName","max","min","maxLength","minLength","regex","default"];let he;ne.includes(k)&&de===""?he=null:he=de;const ie=Object.assign({},Ae);k==="max"&&delete ie.min,k==="maxLength"&&delete ie.minLength,delete ie[k],E({type:b.h,errors:ie}),E({type:b.j,keys:k.split("."),value:he,...B})},[E,Ae]),ge=async(k,de=$e)=>{k.preventDefault();try{await Po(),$o(de);const fe=p==="components"?O:rn;if(q)if($e)Ge({...v,kind:h},g,rn),Q({pathname:`/plugins/${b.p}/content-types/${rn}`}),t({forTarget:p,targetUid:fe});else{po(se,v)?(e(),tn(v)):z({type:"warning",message:{id:"notification.contentType.relations.conflict"}});return}else if(g==="component")if($e){const B=(0,b.c)(v.displayName,v.category),{category:ne,...he}=v;Ge(he,"component",B,ne),Q({pathname:`/plugins/${b.p}/component-categories/${ne}/${B}`}),t({forTarget:p,targetUid:B})}else{ct(v,g,O),e();return}else if(ca){if(jn(te.name)===jn(v.name)){e();return}_t(te.name,v);return}else if(le){const B={attributeToSet:{...v,customField:c},forTarget:p,targetUid:O,initialAttribute:te};i==="edit"?en(B):ae(B),de?t({forTarget:p,targetUid:fe}):e();return}else if(re&&!Oe){if(d==="dynamiczone"){Re(v,p,O,i==="edit",te),$e?(E({type:b.k}),R.current._handlers.setSelectedTabIndex(0),n({dynamicZoneTarget:v.name})):e();return}if(!Ze){Re(v,p,O,i==="edit",te),de?t({forTarget:p,targetUid:fe}):e();return}if(we){s(),E({type:b.l,forTarget:p});return}Re(v,p,O,i==="edit",te,!0),de?t({forTarget:p,targetUid:O}):e()}else if(re&&Oe){if(we){I("willCreateComponentFromAttributesModal"),E({type:b.m,forTarget:p}),s();return}const{category:B,type:ne,...he}=tt,ie=(0,b.c)(tt.displayName,B);Ge(he,ne,ie,B,Oe),Re(v,p,O,!1),E({type:b.R}),de?t({forTarget:"components",targetUid:ie}):e();return}else{if(we)if(Oe){const{category:B,type:ne,...he}=v.componentToCreate,ie=(0,b.c)(v.componentToCreate.displayName,B);Ge(he,ne,ie,B,Oe),V(m,[ie]),t({forTarget:"components",targetUid:ie})}else Jt(m,v.components),e();else console.error("This case is not handled");return}E({type:b.R})}catch(fe){const B=(0,A.getYupInnerErrors)(fe);console.log({err:fe,errors:B}),E({type:b.h,errors:B})}},Io=()=>{window.confirm(ee({id:"window.confirm.close-modal.file",defaultMessage:"Are you sure? Your changes will be lost."}))&&(e(),E({type:b.R}))},ga=()=>{ht(v,te)?(e(),E({type:b.R})):Io()},Do=k=>{if(k==="advanced"){if(q){I("didSelectContentTypeSettings");return}p==="contentType"&&I("didSelectContentTypeFieldSettings")}},$o=k=>{g==="attribute"&&p==="contentType"&&d!=="dynamiczone"&&k&&I("willAddMoreFieldToContentType")},qo=()=>!!(g==="editCategory"||g==="component"||gi(v,"createComponent")),ko=go(p,O,nn);if(!x||!g)return null;const fa=L(Fe,[g,"form"],{advanced:()=>({sections:[]}),base:()=>({sections:[]})}),zo=p==="components"||p==="component",ha={customInputs:{"allowed-types-select":xt,"boolean-radio-group":In,"checkbox-with-number-field":Mt,"icon-picker":Nt,"content-type-radio-group":Dn,"radio-group":Je,relation:qn,"select-category":Et,"select-component":Pt,"select-components":kn,"select-default-boolean":Ct,"select-number":Dt,"select-date":It,"toggle-draft-publish":jt,"text-plural":Ft,"text-singular":$t,"textarea-enum":kt,...J},componentToCreate:tt,dynamicZoneTarget:m,formErrors:Ae,isAddingAComponentToAnotherComponent:zo,isCreatingComponentWhileAddingAField:nt,mainBoxHeader:L(se,[...F,"schema","displayName"],""),modifiedData:v,naturePickerType:p,isCreating:$e,targetUid:O,forTarget:p},ya=fa.advanced({data:v,type:d,step:j,actionType:i,attributes:on,extensions:H,forTarget:p,contentTypeSchema:se.contentType||{},customField:T}).sections,va=fa.base({data:v,type:d,step:j,actionType:i,attributes:on,extensions:H,forTarget:p,contentTypeSchema:se.contentType||{},customField:T}).sections,Uo=_n(va),Bo=_n(ya),Wo=Object.keys(Ae).some(k=>Uo.includes(k)),Vo=Object.keys(Ae).some(k=>Bo.includes(k)),Go=L(Ve,[O,"schema","kind"]),wo=()=>i==="edit"&&on.every(({name:k})=>k!==v?.name),Ho=()=>{wo()&&I("didEditFieldNameOnContentType")};return(0,r.jsxs)(Sa.P,{onClose:ga,labelledBy:"title",children:[(0,r.jsx)(At,{actionType:i,attributeName:l,categoryName:f,contentTypeKind:h,dynamicZoneTarget:m,modalType:g,forTarget:p,targetUid:O,attributeType:d,customFieldUid:c,showBackLink:C}),ma&&(0,r.jsx)(Pn,{attributes:ko,forTarget:p,kind:Go||"collectionType"}),!ma&&(0,r.jsxs)("form",{onSubmit:ge,children:[(0,r.jsx)(ue.f,{children:(0,r.jsxs)(be.v,{label:"todo",id:"tabs",variant:"simple",ref:R,onTabChange:k=>{k===1&&Do("advanced")},children:[(0,r.jsxs)(D.k,{justifyContent:"space-between",children:[(0,r.jsx)(Zt,{actionType:i,forTarget:p,kind:h,step:j,modalType:g,attributeType:d,attributeName:l,customField:T}),(0,r.jsxs)(ve.m,{children:[(0,r.jsx)(ve.O,{hasError:Wo,children:ee({id:u("popUpForm.navContainer.base"),defaultMessage:"Basic settings"})}),(0,r.jsx)(ve.O,{hasError:Vo,disabled:qo(),children:ee({id:u("popUpForm.navContainer.advanced"),defaultMessage:"Advanced settings"})})]})]}),(0,r.jsx)(xe.i,{}),(0,r.jsx)($.x,{paddingTop:6,children:(0,r.jsxs)(K.n,{children:[(0,r.jsx)(K.x,{children:(0,r.jsx)(D.k,{direction:"column",alignItems:"stretch",gap:6,children:(0,r.jsx)(qt,{form:va,formErrors:Ae,genericInputProps:ha,modifiedData:v,onChange:pa})})}),(0,r.jsx)(K.x,{children:(0,r.jsx)(D.k,{direction:"column",alignItems:"stretch",gap:6,children:(0,r.jsx)(qt,{form:ya,formErrors:Ae,genericInputProps:ha,modifiedData:v,onChange:pa})})})]})})]})}),(0,r.jsx)(Na.m,{endActions:(0,r.jsx)(Rt,{deleteCategory:Kt,deleteContentType:ut,deleteComponent:ut,categoryName:te.name,isAttributeModal:g==="attribute",isCustomFieldModal:g==="customField",isComponentToDzModal:g==="addComponentToDynamicZone",isComponentAttribute:d==="component",isComponentModal:g==="component",isContentTypeModal:g==="contentType",isCreatingComponent:i==="create",isCreatingDz:i==="create",isCreatingComponentAttribute:v.createComponent||!1,isCreatingComponentInDz:v.createComponent||!1,isCreatingComponentWhileAddingAField:nt,isCreatingContentType:i==="create",isEditingAttribute:i==="edit",isDzAttribute:d==="dynamiczone",isEditingCategory:g==="editCategory",isInFirstComponentStep:j==="1",onSubmitAddComponentAttribute:ge,onSubmitAddComponentToDz:ge,onSubmitCreateComponent:ge,onSubmitCreateContentType:ge,onSubmitCreateDz:ge,onSubmitEditAttribute:ge,onSubmitEditCategory:ge,onSubmitEditComponent:ge,onSubmitEditContentType:ge,onSubmitEditCustomFieldAttribute:ge,onSubmitEditDz:ge,onClickFinish:Ho}),startActions:(0,r.jsx)(X.z,{variant:"tertiary",onClick:ga,children:ee({id:"app.components.Button.cancel",defaultMessage:"Cancel"})})})]})]})},ho=()=>e=>e[`${b.p}_dataManagerProvider`]||b.o,yo=()=>Hn(ho(),e=>e),vo=(e,t)=>{const n=Object.keys(e).filter(s=>{const i=L(e,s,{}),l=L(t,s,{}),d=L(i,["isTemporary"],!1),c=!ht(i,l);return d||c});return(0,b.q)(n)},bo=(e,t)=>{const n=ta(L(e,"schema.attributes",[]),t),s=L(e,"isTemporary",!1)?{tmpUID:e.uid}:{uid:e.uid};return Object.assign({},s,{category:e.category},An(e.schema,"attributes"),{attributes:n})},ea=(e,t=!1)=>{const n=L(e,"uid",null),s=ta(L(e,"schema.attributes",[]),n),i=t?{category:L(e,"category","")}:{},l=Object.assign(i,An(e.schema,"attributes"),{attributes:s});return delete l.uid,delete l.isTemporary,delete l.visible,delete l.restrictRelationsTo,l},ta=(e,t)=>e.reduce((n,{name:s,...i})=>{const l=i,d=l.target===t,c=l.type==="relation",f=L(l,"targetAttribute",null);if(!d)if(c){const m=Object.assign({},l,{targetAttribute:na(f)});n[s]=dt(m)}else n[s]=dt(l);if(d){const m=l.target,p=Object.assign({},l,{target:m,targetAttribute:na(f)});n[s]=dt(p)}if(l.customField){const m={...l,type:"customField"};n[s]=dt(m)}return n},{}),na=e=>e==="-"?null:e,dt=e=>Object.keys(e).reduce((t,n)=>(e[n]!==null&&n!=="plugin"&&(t[n]=e[n]),t),{}),xo=(e,t,n,s=!1)=>vo(e,t).map(d=>{const c=L(e,d,{});return bo(c,n)}),To=e=>xi(Object.keys(e).map(t=>({visible:e[t].schema.visible,name:t,title:e[t].schema.displayName,plugin:e[t].plugin||null,uid:t,to:`/plugins/${b.p}/content-types/${t}`,kind:e[t].schema.kind,restrictRelationsTo:e[t].schema.restrictRelationsTo})).filter(t=>t!==null),t=>bi(t.title)),aa=e=>e.reduce((t,n)=>(t[n.uid]=n,t),{}),Co=(e,t,n,s)=>{const i=t.reduce((c,f)=>{const m=L(n,f,{});return c[f]=m,c},{});return{[s?"contentType":"component"]:e,components:i}},sa=e=>Object.keys(e).reduce((t,n)=>{const s=e[n].schema;return t[n]={...e[n],schema:{...s,attributes:Mo(s.attributes)}},t},{}),Mo=e=>Object.keys(e).reduce((t,n)=>(t.push({...e[n],name:n}),t),[]),jo=e=>{const t=Object.keys(e).reduce((n,s)=>{const i=L(e,[s],{}),l=i.uid;return Ro(i)&&n.push(l),n},[]);return(0,b.q)(t)},Ro=e=>L(e,["schema","attributes"],[]).some(n=>{const{type:s}=n;return s==="component"}),ra=e=>{const t=Object.keys(e).reduce((n,s)=>{const i=e?.[s]?.schema?.attributes??[],l=Ao(i);return[...n,...l]},[]);return(0,b.q)(t)},Ao=e=>e.reduce((t,n)=>{const{type:s,component:i}=n;return s==="component"&&t.push(i),t},[]),Zo=(e,t)=>{const n=Object.keys(e).map(s=>L(e,[s,...t],""));return(0,b.q)(n)},ia="did-not-kill-server",So="server is down";function _e(e,t){return new Promise(n=>{fetch(`${window.strapi.backendURL}/_health`,{method:"HEAD",mode:"no-cors",headers:{"Content-Type":"application/json","Keep-Alive":!1}}).then(s=>{if(s.status>=400)throw new Error(So);if(!t)throw new Error(ia);n(e)}).catch(s=>{setTimeout(()=>_e(e,s.message!==ia).then(n),100)})})}const No=e=>Object.values(e.attributes).filter(({type:n})=>n==="dynamiczone").every(({components:n})=>Array.isArray(n)&&n.length>0),oa=({children:e})=>{const t=(0,Pe.useDispatch)(),{components:n,contentTypes:s,isLoading:i,isLoadingForDataToBeSet:l,initialData:d,modifiedData:c,reservedNames:f}=(0,Pe.useSelector)(yo()),m=(0,A.useNotification)(),{lockAppWithAutoreload:p,unlockAppWithAutoreload:g}=(0,A.useAutoReloadOverlayBlocker)(),{setCurrentStep:x}=(0,A.useGuidedTour)(),{getPlugin:C}=(0,A.useStrapiApp)(),{apis:h}=C(b.p),{autoReload:j}=(0,A.useAppInfo)(),{formatMessage:O}=(0,W.Z)(),{trackUsage:T}=(0,A.useTracking)(),{refetchPermissions:R}=(0,A.useRBACProvider)(),{pathname:Z}=(0,oe.TH)(),{onCloseModal:E}=Ie(),z=(0,oe.$B)(`/plugins/${b.p}/content-types/:uid`),Y=(0,oe.$B)(`/plugins/${b.p}/component-categories/:categoryUid/:componentUid`),Q=(0,A.useFetchClient)(),{put:I,post:ee,del:U}=Q,w=(0,P.useRef)();w.current=O;const H=j,J=z!==null,Re=J?"contentType":"component",ae=J?L(z,"params.uid",null):L(Y,"params.componentUid",null),V=(0,P.useRef)(),S=J?"content-types":"components";V.current=async()=>{try{const[{data:{data:v}},{data:{data:F}},{data:q}]=await Promise.all(["components","content-types","reserved-names"].map($e=>Q.get(`/${b.p}/${$e}`))),_=aa(v),re=sa(_),le=aa(F),Ze=sa(le);t({type:b.G,components:re,contentTypes:Ze,reservedNames:q})}catch(v){console.error({err:v}),m({type:"warning",message:{id:"notification.error"}})}},(0,P.useEffect)(()=>(V.current(),()=>{t({type:b.r})}),[]),(0,P.useEffect)(()=>{!i&&ae&&ct()},[i,Z,ae]),(0,P.useEffect)(()=>{j||m({type:"info",message:{id:u("notification.info.autoreaload-disable")}})},[j,m]);const Jt=(v,F,q,_=!1,re,le=!1)=>{const Ze=_?b.w:b.x;t({type:Ze,attributeToSet:v,forTarget:F,targetUid:q,initialAttribute:re,shouldAddComponentToData:le})},Ve=({attributeToSet:v,forTarget:F,targetUid:q,initialAttribute:_})=>{t({type:b.A,attributeToSet:v,forTarget:F,targetUid:q,initialAttribute:_})},et=({attributeToSet:v,forTarget:F,targetUid:q,initialAttribute:_})=>{t({type:b.E,attributeToSet:v,forTarget:F,targetUid:q,initialAttribute:_})},Ge=(v,F)=>{t({type:b.u,dynamicZoneTarget:v,componentsToAdd:F})},Kt=(v,F,q,_,re=!1)=>{const le=F==="contentType"?b.y:b.z;t({type:le,data:v,componentCategory:_,schemaType:F,uid:q,shouldAddComponentToData:re})},ut=(v,F)=>{t({type:b.C,dynamicZoneTarget:v,newComponents:F})},_t=(v,F,q="")=>{const _=v==="components"?b.B:b.F;v==="contentType"&&T("willDeleteFieldOfContentType"),t({type:_,mainDataKey:v,attributeToRemoveName:F,componentUid:q})},en=async v=>{try{const F=`/${b.p}/component-categories/${v}`,q=window.confirm(O({id:u("popUpWarning.bodyMessage.category.delete")}));E(),q&&(p(),await U(F),await _e(!0),await g(),await te())}catch(F){console.error({err:F}),m({type:"warning",message:{id:"notification.error"}})}finally{g()}},tn=async()=>{try{const v=`/${b.p}/${S}/${ae}`,F=L(c,[Re,"isTemporary"],!1),q=window.confirm(O({id:u(`popUpWarning.bodyMessage.${J?"contentType":"component"}.delete`)}));if(E(),q){if(F){t({type:b.D});return}p(),await U(v),await _e(!0),await g(),await te()}}catch(v){console.error({err:v}),m({type:"warning",message:{id:"notification.error"}})}finally{g()}},se=async(v,F)=>{try{const q=`/${b.p}/component-categories/${v}`;E(),p(),await I(q,F),await _e(!0),await g(),await te()}catch(q){console.error({err:q}),m({type:"warning",message:{id:"notification.error"}})}finally{g()}},nn=()=>{const v=Object.assign({},n,c.components);if(!J){const q=L(c,"component",{});Mn(v,L(q,["uid"],""),q)}const F=jo(v);return(0,b.q)(F)},an=()=>{const v=ra(n),F=ra(c.components||{});return(0,b.q)([...F,...v])},sn=(v,F)=>{t({type:b.v,dzName:v,componentToRemoveIndex:F})},ct=()=>{const F=L(J?s:n,ae,{schema:{attributes:[]}}),q=(0,b.s)(F.schema.attributes,n),_=Co(F,q,n,J),re=L(F,"isTemporary",!1)&&pi(L(F,"schema.attributes",[]))===0;t({type:b.t,schemaToSet:_,hasJustCreatedSchema:re})},Le=(0,P.useMemo)(()=>{const v=J?s:n;return ae==="create-content-type"?!1:!Object.keys(v).includes(ae)&&!i},[n,s,ae,J,i]),tt=(0,P.useMemo)(()=>{const v=Object.keys(s).filter(F=>L(s,[F,"schema","visible"],!0)).sort();return L(v,"0","create-content-type")},[s]);if(Le)return(0,r.jsx)(oe.l_,{to:`/plugins/${b.p}/content-types/${tt}`});const Ae=async v=>{try{const F=L(c,[Re,"isTemporary"],!1),q={components:xo(c.components,n,ae,F)};if(J){const le=h.forms.mutateContentTypeSchema({...ea(c.contentType),...v},d.contentType);if(!No(le)){m({type:"warning",message:{id:u("notification.error.dynamiczone-min.validation"),defaultMessage:"At least one component is required in a dynamic zone to be able to save a content type"}});return}q.contentType=le,T("willSaveContentType")}else q.component=ea(c.component,!0),T("willSaveComponent");p();const _=`/${b.p}/${S}`,re=F?_:`${_}/${ae}`;if(F?await ee(re,q):await I(re,q),await _e(!0),await g(),F&&(d.contentType?.schema.kind==="collectionType"||d.contentType?.schema.kind==="singleType")&&x("contentTypeBuilder.success"),J){T("didSaveContentType");const le=L(q,["contentType","schema","name"],""),Ze=L(d,["contentType","schema","name"],"");!F&&le!==Ze&&T("didEditNameOfContentType")}else T("didSaveComponent");await te()}catch(F){J||T("didNotSaveComponent"),console.error({err:F.response}),m({type:"warning",message:{id:"notification.error"}})}finally{g()}},te=async()=>{await R()},nt=(v,F,q)=>{t({type:b.U,data:v,schemaType:F,uid:q})};return(0,r.jsx)(Zn.Provider,{value:{addAttribute:Jt,addCustomFieldAttribute:Ve,addCreatedComponentToDynamicZone:Ge,allComponentsCategories:Zo(n,["category"]),changeDynamicZoneComponents:ut,components:n,componentsGroupedByCategory:mi(n,"category"),componentsThatHaveOtherComponentInTheirAttributes:nn(),contentTypes:s,createSchema:Kt,deleteCategory:en,deleteData:tn,editCategory:se,editCustomFieldAttribute:et,isInDevelopmentMode:H,initialData:d,isInContentTypeView:J,modifiedData:c,nestedComponents:an(),removeAttribute:_t,removeComponentFromDynamicZone:sn,reservedNames:f,setModifiedData:ct,sortedContentTypesList:To(s),submitData:Ae,updateSchema:nt},children:l?(0,r.jsx)(A.LoadingIndicatorPage,{}):(0,r.jsxs)(r.Fragment,{children:[e,H&&(0,r.jsx)(fo,{})]})})};oa.propTypes={children:a.node.isRequired};const Fo=(0,P.memo)(oa),la={actionType:null,attributeName:null,attributeType:null,categoryName:null,dynamicZoneTarget:null,forTarget:null,modalType:null,isOpen:!1,showBackLink:!1,kind:null,step:null,targetUid:null,customFieldUid:null},da=({children:e})=>{const[t,n]=(0,P.useState)(la),{trackUsage:s}=(0,A.useTracking)(),i=({attributeType:T,customFieldUid:R})=>{n(Z=>({...Z,actionType:"create",modalType:"customField",attributeType:T,customFieldUid:R}))},l=({attributeType:T,step:R})=>{t.forTarget==="contentType"&&s("didSelectContentTypeFieldType",{type:T}),n(Z=>({...Z,actionType:"create",modalType:"attribute",step:R,attributeType:T,showBackLink:!0}))},d=({dynamicZoneTarget:T,targetUid:R})=>{n(Z=>({...Z,dynamicZoneTarget:T,targetUid:R,modalType:"addComponentToDynamicZone",forTarget:"contentType",step:"1",actionType:"edit",isOpen:!0}))},c=({forTarget:T,targetUid:R})=>{n(Z=>({...Z,actionType:"create",forTarget:T,targetUid:R,modalType:"chooseAttribute",isOpen:!0,showBackLink:!1}))},f=T=>{n(R=>({...R,...T,isOpen:!0}))},m=T=>{n(R=>({...R,categoryName:T,actionType:"edit",modalType:"editCategory",isOpen:!0}))},p=({forTarget:T,targetUid:R,attributeName:Z,attributeType:E,customFieldUid:z})=>{n(Y=>({...Y,modalType:"customField",customFieldUid:z,actionType:"edit",forTarget:T,targetUid:R,attributeName:Z,attributeType:E,isOpen:!0}))},g=({forTarget:T,targetUid:R,attributeName:Z,attributeType:E,step:z})=>{n(Y=>({...Y,modalType:"attribute",actionType:"edit",forTarget:T,targetUid:R,attributeName:Z,attributeType:E,step:z,isOpen:!0}))},x=({modalType:T,forTarget:R,targetUid:Z,kind:E})=>{n(z=>({...z,modalType:T,actionType:"edit",forTarget:R,targetUid:Z,kind:E,isOpen:!0}))},C=()=>{n(la)},h=({forTarget:T,targetUid:R})=>{n(Z=>({...Z,forTarget:T,targetUid:R,modalType:"chooseAttribute"}))},j=()=>{n(T=>({...T,attributeType:"component",modalType:"attribute",step:"2"}))},O=({dynamicZoneTarget:T})=>{n(R=>({...R,dynamicZoneTarget:T,modalType:"addComponentToDynamicZone",actionType:"create",step:"1",attributeType:null,attributeName:null}))};return(0,r.jsx)(Sn.Provider,{value:{...t,onClickSelectField:l,onClickSelectCustomField:i,onCloseModal:C,onNavigateToChooseAttributeModal:h,onNavigateToAddCompoToDZModal:O,onOpenModalAddComponentsToDZ:d,onNavigateToCreateComponentStep2:j,onOpenModalAddField:c,onOpenModalCreateSchema:f,onOpenModalEditCategory:m,onOpenModalEditField:g,onOpenModalEditCustomField:p,onOpenModalEditSchema:x,setFormModalNavigationState:n},children:e})};da.propTypes={children:a.node.isRequired};const Lo=(0,P.lazy)(()=>o.e(1739).then(o.bind(o,71739))),Oo=()=>{const{url:e}=(0,oe.$B)(),{categoryUid:t}=(0,oe.UO)();return(0,r.jsx)(P.Suspense,{fallback:(0,r.jsx)(A.LoadingIndicatorPage,{}),children:(0,r.jsx)(oe.rs,{children:(0,r.jsx)(oe.AW,{path:`${e}/:componentUid`,children:(0,r.jsx)(Lo,{categoryId:t})})})})},ua=(0,P.lazy)(()=>o.e(1739).then(o.bind(o,71739))),Eo=Object.freeze(Object.defineProperty({__proto__:null,default:()=>{const{formatMessage:e}=(0,W.Z)(),t=e({id:`${b.p}.plugin.name`,defaultMessage:"Content Types Builder"}),{startSection:n}=(0,A.useGuidedTour)(),s=(0,P.useRef)(n);return(0,P.useEffect)(()=>{s.current&&s.current("contentTypeBuilder")},[]),(0,r.jsxs)(A.CheckPagePermissions,{permissions:b.P.main,children:[(0,r.jsx)(La.q,{title:t}),(0,r.jsx)(da,{children:(0,r.jsx)(Fo,{children:(0,r.jsx)(Fa.A,{sideNav:(0,r.jsx)(Ci,{}),children:(0,r.jsx)(P.Suspense,{fallback:(0,r.jsx)(A.LoadingIndicatorPage,{}),children:(0,r.jsxs)(oe.rs,{children:[(0,r.jsx)(oe.AW,{path:`/plugins/${b.p}/content-types/create-content-type`,component:ua}),(0,r.jsx)(oe.AW,{path:`/plugins/${b.p}/content-types/:uid`,component:ua}),(0,r.jsx)(oe.AW,{path:`/plugins/${b.p}/component-categories/:categoryUid`,component:Oo})]})})})})})]})}},Symbol.toStringTag,{value:"Module"}))}}]);
