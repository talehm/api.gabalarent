(self.webpackChunkstrapi=self.webpackChunkstrapi||[]).push([[7280],{1107:(y,T,t)=>{var n=t(84856),r=t(52593),m=r(n);y.exports=m},92403:(y,T,t)=>{var n=t(1107),r=t(47727);function m(u,p){var l=-1,d=r(u)?Array(u.length):[];return n(u,function(g,D,x){d[++l]=p(g,D,x)}),d}y.exports=m},16429:(y,T,t)=>{var n=t(36393),r=t(82393),m=t(90040),u=t(92403),p=t(63135),l=t(20435),d=t(9998),g=t(51339),D=t(26126);function x(f,R,L){R.length?R=n(R,function(v){return D(v)?function(S){return r(S,v.length===1?v[0]:v)}:v}):R=[g];var _=-1;R=n(R,l(m));var I=u(f,function(v,S,F){var Z=n(R,function(V){return V(v)});return{criteria:Z,index:++_,value:v}});return p(I,function(v,S){return d(v,S,L)})}y.exports=x},63135:y=>{function T(t,n){var r=t.length;for(t.sort(n);r--;)t[r]=t[r].value;return t}y.exports=T},17654:(y,T,t)=>{var n=t(85194);function r(m,u){if(m!==u){var p=m!==void 0,l=m===null,d=m===m,g=n(m),D=u!==void 0,x=u===null,f=u===u,R=n(u);if(!x&&!R&&!g&&m>u||g&&D&&f&&!x&&!R||l&&D&&f||!p&&f||!d)return 1;if(!l&&!g&&!R&&m<u||R&&p&&d&&!l&&!g||x&&p&&d||!D&&d||!f)return-1}return 0}y.exports=r},9998:(y,T,t)=>{var n=t(17654);function r(m,u,p){for(var l=-1,d=m.criteria,g=u.criteria,D=d.length,x=p.length;++l<D;){var f=n(d[l],g[l]);if(f){if(l>=x)return f;var R=p[l];return f*(R=="desc"?-1:1)}}return m.index-u.index}y.exports=r},52593:(y,T,t)=>{var n=t(47727);function r(m,u){return function(p,l){if(p==null)return p;if(!n(p))return m(p,l);for(var d=p.length,g=u?d:-1,D=Object(p);(u?g--:++g<d)&&l(D[g],g,D)!==!1;);return p}}y.exports=r},51006:(y,T,t)=>{var n=t(93367),r=t(16429),m=t(52431),u=t(65145),p=m(function(l,d){if(l==null)return[];var g=d.length;return g>1&&u(l,d[0],d[1])?d=[]:g>2&&u(d[0],d[1],d[2])&&(d=[d[0]]),r(l,n(d,1),[])});y.exports=p},67280:(y,T,t)=>{"use strict";t.r(T),t.d(T,{SettingsPage:()=>Mn});var n=t(74081),r=t(27279),m=t(50703),u=t(5938),p=t(6918),l=t(21395),d=t(77804),g=t(93415),D=t(1821),x=t(10701),f=t(48102),R=t(55911),L=t(35250),_=t(12881),I=t(69878),v=t(94098),S=t(84366),F=t(61908),Z=t(98410),V=t(1597),st=t(77011),w=t(67909),et=t(9902),J=t(83375),ot=t(94485),X=t(6120),at=t(97767),it=t(4987),mt=t(93841),Y=t(23298),G=t(74577),gt=t(27997),pt=t(73354),ht=t(77970),Et=t(27875),H=t(74758),Ct=t(68412),B=t(1180),_t=t(364),$=t(61020),lt=t(51447),Ft=t(47533),Q=t(92401),Zt=t(51006),jt=t(49402),Rt=t(44328),$t=t(71877),Nt=t(25804),Gt=t(96220),Ht=t(20534),Vt=t(49370),Jt=t(91561),Qt=t(80153),Xt=t(36938),Yt=t(84352),bt=t(59082),yt=t(48157),o=t(70627),Tt=t(72450),At=t(40464),Mt=t(61815),wt=t(87830),xn=t(15816),fn=t(97442),On=t(13576),Pn=t(47184),Dn=t(71563),Ln=t(49204),vn=t(47853),Cn=t(75719),jn=t(74919),Rn=t(29206),yn=t(98934),Tn=t(43433),An=t(64797),Bn=t(85811),Un=t(8175);const kt=e=>e.map(s=>{const i=s.links.map(a=>({...a,isDisplayed:!1}));return{...s,links:i}}),qt=()=>{const[{isLoading:e,menu:s},i]=r.useState({isLoading:!0,menu:[]}),{allPermissions:a}=(0,B.useRBACProvider)(),{shouldUpdateStrapi:h}=(0,B.useAppInfo)(),{settings:O}=(0,B.useStrapiApp)(),C=(0,jt.useSelector)(Rt.s),P=r.useMemo(()=>(0,Q.Q)(),[]),{admin:E,global:c}=(0,Q.p)(P,async()=>(await t.e(5146).then(t.bind(t,75146))).SETTINGS_LINKS_EE(),{combine(M,U){return{admin:[...U.admin,...M.admin],global:[...M.global,...U.global]}},defaultValue:{admin:[],global:[]}}),A=r.useCallback(M=>{if(!M.id)throw new Error("The settings menu item must have an id attribute.");return{...M,permissions:C.settings?.[M.id]?.main??[]}},[C.settings]);return r.useEffect(()=>{const M=async()=>{const N=await(q=>Promise.all(q.reduce((tt,dt,ct)=>{const j=dt.links.map(async(nt,b)=>({hasPermission:await(0,B.hasPermissions)(a,nt.permissions),sectionIndex:ct,linkIndex:b}));return[...tt,...j]},[])))(z);i(q=>({...q,isLoading:!1,menu:z.map((tt,dt)=>({...tt,links:tt.links.map((ct,j)=>{const nt=N.find(b=>b.sectionIndex===dt&&b.linkIndex===j);return{...ct,isDisplayed:Boolean(nt?.hasPermission)}})}))}))},{global:U,...K}=O,z=kt([{...U,links:Zt([...U.links,...c.map(A)],W=>W.id).map(W=>({...W,hasNotification:W.id==="000-application-infos"&&h}))},{id:"permissions",intlLabel:{id:"Settings.permissions",defaultMessage:"Administration Panel"},links:E.map(A)},...Object.values(K)]);M()},[E,c,a,O,h,A]),{isLoading:e,menu:s.map(M=>({...M,links:M.links.filter(U=>U.isDisplayed)}))}},tn=(0,Tt.default)(m.J)`
  right: 15px;
  position: absolute;
`,Bt=({menu:e})=>{const{formatMessage:s}=(0,$.Z)(),{trackUsage:i}=(0,B.useTracking)(),{pathname:a}=(0,lt.TH)(),O=e.filter(E=>!E.links.every(c=>c.isDisplayed===!1)).map(E=>({...E,title:E.intlLabel,links:E.links.map(c=>({...c,title:c.intlLabel,name:c.id}))})),C=s({id:"global.settings",defaultMessage:"Settings"}),P=(E=null)=>{i("willNavigate",{from:a,to:E})};return(0,n.jsxs)($t.m,{ariaLabel:C,children:[(0,n.jsx)(Nt.p,{label:C}),(0,n.jsx)(Gt.Z,{children:O.map(E=>(0,n.jsx)(Ht.D,{label:s(E.intlLabel),children:E.links.map(c=>(0,n.jsxs)(Vt.E,{as:Ft.OL,withBullet:c.hasNotification,to:c.to,onClick:()=>P(c.to),children:[s(c.intlLabel),c?.lockIcon&&(0,n.jsx)(tn,{width:`${15/16}rem`,height:`${15/16}rem`,as:Jt.Z})]},c.id))},E.id))})]})};Bt.propTypes={menu:o.array.isRequired};const nn=[{async Component(){return await t.e(1).then(t.bind(t,80001))},to:"/settings/roles",exact:!0},{async Component(){return await Promise.all([t.e(4260),t.e(8902),t.e(8589)]).then(t.bind(t,18589))},to:"/settings/roles/duplicate/:id",exact:!0},{async Component(){return await Promise.all([t.e(4260),t.e(8902),t.e(8589)]).then(t.bind(t,18589))},to:"/settings/roles/new",exact:!0},{async Component(){return await Promise.all([t.e(8902),t.e(1856)]).then(t.bind(t,31856))},to:"/settings/roles/:id",exact:!0},{async Component(){return await t.e(2919).then(t.bind(t,92919)).then(s=>s.i)},to:"/settings/users",exact:!0},{async Component(){return await t.e(979).then(t.bind(t,80979))},to:"/settings/users/:id",exact:!0},{async Component(){return await Promise.all([t.e(9073),t.e(6812)]).then(t.bind(t,96812))},to:"/settings/webhooks/create",exact:!0},{async Component(){return await Promise.all([t.e(9073),t.e(9124)]).then(t.bind(t,39124))},to:"/settings/webhooks/:id",exact:!0},{async Component(){return await t.e(6895).then(t.bind(t,56895))},to:"/settings/webhooks",exact:!0},{async Component(){return await t.e(1053).then(t.bind(t,31053))},to:"/settings/api-tokens",exact:!0},{async Component(){return await Promise.all([t.e(4260),t.e(6094),t.e(1546),t.e(6324)]).then(t.bind(t,86324))},to:"/settings/api-tokens/create",exact:!0},{async Component(){return await Promise.all([t.e(4260),t.e(6094),t.e(1546),t.e(4075)]).then(t.bind(t,14075))},to:"/settings/api-tokens/:id",exact:!0},{async Component(){return await Promise.all([t.e(4260),t.e(6094),t.e(2749)]).then(t.bind(t,52749))},to:"/settings/transfer-tokens/create",exact:!0},{async Component(){return await t.e(5536).then(t.bind(t,55536))},to:"/settings/transfer-tokens",exact:!0},{async Component(){return await Promise.all([t.e(4260),t.e(6094),t.e(9227)]).then(t.bind(t,29227))},to:"/settings/transfer-tokens/:id",exact:!0},{async Component(){return await t.e(816).then(t.bind(t,816))},to:"/settings/purchase-audit-logs",exact:!0},{async Component(){return await t.e(3674).then(t.bind(t,33674))},to:"/settings/purchase-review-workflows",exact:!0},{async Component(){return await t.e(4456).then(t.bind(t,84456))},to:"/settings/purchase-single-sign-on",exact:!0}],k=750,rt=100,Ut=["image/jpeg","image/png","image/svg+xml"],It={localImage:void 0},sn=(e=It,s)=>(0,Mt.ZP)(e,i=>{switch(s.type){case"SET_LOCAL_IMAGE":{i.localImage=s.value;break}default:return i}}),xt=({onChangeLogo:e,customLogo:s,goTo:i,Component:a,modalTitle:h,next:O,prev:C,currentStep:P})=>{const[{localImage:E},c]=(0,r.useReducer)(sn,It),{formatMessage:A}=(0,$.Z)(),M=K=>{c({type:"SET_LOCAL_IMAGE",value:K})},U=()=>{i(null)};return P?(0,n.jsxs)(u.P,{labelledBy:"modal",onClose:U,children:[(0,n.jsx)(p.x,{children:(0,n.jsx)(l.Z,{fontWeight:"bold",as:"h2",id:"modal",children:A(h)})}),(0,n.jsx)(a,{setLocalImage:M,goTo:i,next:O,prev:C,onClose:U,asset:E||s,onChangeLogo:e})]}):null};xt.defaultProps={Component:void 0,currentStep:void 0,customLogo:void 0,modalTitle:void 0,next:null,prev:null},xt.propTypes={Component:o.elementType,currentStep:o.string,customLogo:o.shape({name:o.string,url:o.string,width:o.number,height:o.number,ext:o.string}),goTo:o.func.isRequired,modalTitle:o.shape({id:o.string,defaultMessage:o.string}),next:o.string,onChangeLogo:o.func.isRequired,prev:o.string};const St={currentStep:void 0},en=(e=St,s)=>(0,Mt.ZP)(e,i=>{switch(s.type){case"GO_TO":{i.currentStep=s.to;break}default:return i}}),on={id:"Settings.application.customization.modal.upload.error-format",defaultMessage:"Wrong format uploaded (accepted formats only: jpeg, jpg, png, svg)."},Wt={id:"Settings.application.customization.modal.upload.error-size",defaultMessage:"The file uploaded is too large (max dimension: {dimension}x{dimension}, max file size: {size}KB)"},an=e=>new Promise(s=>{const i=new FileReader;i.onload=()=>{const a=new Image;a.onload=function(){s({width:a.width,height:a.height})},a.src=i.result},i.readAsDataURL(e)}),ln=(e,s)=>({ext:e.name.split(".").pop(),size:e.size/1e3,name:e.name,url:URL.createObjectURL(e),rawFile:e,width:s.width,height:s.height}),Kt=async e=>{let s;if(!Ut.includes(e.type))throw s=new Error("File format"),s.displayMessage=on,s;const a=await an(e);if(!(a.width<=k&&a.height<=k))throw s=new Error("File sizing"),s.displayMessage=Wt,s;const O=ln(e,a);if(!(O.size<=rt))throw s=new Error("File sizing"),s.displayMessage=Wt,s;return O},rn=(0,Tt.default)(d._)`
  opacity: 0;
  position: absolute;
  top: 0;
  bottom: 0;
  left: 0;
  right: 0;
  z-index: 1;
`,ft=({setLocalImage:e,goTo:s,next:i,onClose:a})=>{const{formatMessage:h}=(0,$.Z)(),[O,C]=(0,r.useState)(!1),[P,E]=(0,r.useState)(void 0),c=(0,r.useRef)(null),A=()=>C(!0),M=()=>C(!1),U=W=>{W.preventDefault(),c.current.click()},K=async()=>{M();const W=c.current.files[0];if(W)try{const N=await Kt(W);e(N),s(i)}catch(N){if(N.displayMessage)E(h(N.displayMessage,{size:rt,dimension:k})),c.current.focus();else throw N}},z=()=>O?"primary500":P?"danger600":"neutral300";return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("form",{children:(0,n.jsx)(g.x,{paddingLeft:8,paddingRight:8,paddingTop:6,paddingBottom:6,children:(0,n.jsx)(D.g,{name:"logo-upload",error:P,children:(0,n.jsx)("label",{htmlFor:"logo-upload",children:(0,n.jsxs)(x.k,{direction:"column",alignItems:"stretch",gap:2,children:[(0,n.jsxs)(x.k,{paddingTop:9,paddingBottom:7,hasRadius:!0,justifyContent:"center",direction:"column",background:O?"primary100":"neutral100",borderColor:z(),borderStyle:"dashed",borderWidth:"1px",position:"relative",onDragEnter:A,onDragLeave:M,children:[(0,n.jsx)(m.J,{color:"primary600",width:`${60/16}rem`,height:`${60/16}rem`,as:Qt.Z,"aria-hidden":!0}),(0,n.jsx)(g.x,{paddingTop:3,paddingBottom:5,children:(0,n.jsx)(l.Z,{variant:"delta",as:"span",children:h({id:"Settings.application.customization.modal.upload.drag-drop",defaultMessage:"Drag and Drop here or"})})}),(0,n.jsx)(rn,{accept:Ut,cursor:"pointer",as:"input",type:"file",name:"files",tabIndex:-1,zIndex:1,onChange:K,ref:c,id:"logo-upload"}),(0,n.jsx)(f.z,{type:"button",onClick:U,children:h({id:"Settings.application.customization.modal.upload.cta.browse",defaultMessage:"Browse files"})}),(0,n.jsx)(g.x,{paddingTop:6,children:(0,n.jsx)(l.Z,{variant:"pi",textColor:"neutral600",children:h({id:"Settings.application.customization.modal.upload.file-validation",defaultMessage:"Max dimension: {dimension}x{dimension}, Max size: {size}KB"},{size:rt,dimension:k})})})]}),(0,n.jsx)(R.c,{})]})})})})}),(0,n.jsx)(L.m,{startActions:(0,n.jsx)(f.z,{onClick:a,variant:"tertiary",children:h({id:"Settings.application.customization.modal.cancel",defaultMessage:"Cancel"})})})]})};ft.defaultProps={next:null},ft.propTypes={goTo:o.func.isRequired,next:o.string,onClose:o.func.isRequired,setLocalImage:o.func.isRequired};const dn=async e=>{try{const{get:s}=(0,B.getFetchClient)(),i=await s(e,{responseType:"blob",timeout:8e3});return new File([i.data],i.config.url,{type:i.headers["content-type"]})}catch(s){throw s.displayMessage={id:"Settings.application.customization.modal.upload.error-network",defaultMessage:"Network error"},s}},Ot=({goTo:e,next:s,onClose:i,setLocalImage:a})=>{const{formatMessage:h}=(0,$.Z)(),[O,C]=(0,r.useState)(""),[P,E]=(0,r.useState)(null),c=M=>{C(M.target.value)},A=async()=>{try{const M=await dn(O),U=await Kt(M);a(U),e(s)}catch(M){if(M.displayMessage)E(h(M.displayMessage,{size:rt,dimension:k}));else throw M}};return(0,n.jsxs)("form",{onSubmit:M=>{M.preventDefault(),A()},children:[(0,n.jsx)(g.x,{paddingLeft:8,paddingRight:8,paddingTop:6,paddingBottom:6,children:(0,n.jsx)(_.o,{label:h({id:"Settings.application.customization.modal.upload.from-url.input-label",defaultMessage:"URL"}),error:P,onChange:c,value:O,name:"logo-url"})}),(0,n.jsx)(L.m,{startActions:(0,n.jsx)(f.z,{onClick:i,variant:"tertiary",children:h({id:"app.components.Button.cancel",defaultMessage:"Cancel"})}),endActions:(0,n.jsx)(f.z,{type:"submit",children:h({id:"Settings.application.customization.modal.upload.next",defaultMessage:"Next"})})})]})};Ot.defaultProps={next:null},Ot.propTypes={goTo:o.func.isRequired,next:o.string,onClose:o.func.isRequired,setLocalImage:o.func.isRequired};const Pt=({setLocalImage:e,goTo:s,next:i,onClose:a})=>{const{formatMessage:h}=(0,$.Z)();return(0,n.jsxs)(I.v,{label:h({id:"Settings.application.customization.modal.tab.label",defaultMessage:"How do you want to upload your assets?"}),variant:"simple",children:[(0,n.jsxs)(g.x,{paddingLeft:8,paddingRight:8,children:[(0,n.jsxs)(v.m,{children:[(0,n.jsx)(v.O,{children:h({id:"Settings.application.customization.modal.upload.from-computer",defaultMessage:"From computer"})}),(0,n.jsx)(v.O,{children:h({id:"Settings.application.customization.modal.upload.from-url",defaultMessage:"From url"})})]}),(0,n.jsx)(S.i,{})]}),(0,n.jsxs)(F.n,{children:[(0,n.jsx)(F.x,{children:(0,n.jsx)(ft,{onClose:a,setLocalImage:e,goTo:s,next:i})}),(0,n.jsx)(F.x,{children:(0,n.jsx)(Ot,{onClose:a,setLocalImage:e,goTo:s,next:i})})]})]})};Pt.defaultProps={next:null},Pt.propTypes={goTo:o.func.isRequired,next:o.string,onClose:o.func.isRequired,setLocalImage:o.func.isRequired};const zt=({asset:e})=>{const{formatMessage:s}=(0,$.Z)();return(0,n.jsxs)(Z.Z,{children:[(0,n.jsx)(V.O,{children:(0,n.jsx)(st.H,{size:"S",src:e.url})}),(0,n.jsxs)(w.e,{children:[(0,n.jsxs)(et.a,{children:[(0,n.jsx)(J.l,{children:e.name}),(0,n.jsx)(J._,{children:`${e.ext.toUpperCase()} - ${e.width}\u2715${e.height}`})]}),(0,n.jsx)(ot.E,{children:s({id:"Settings.application.customization.modal.pending.card-badge",defaultMessage:"image"})})]})]})};zt.propTypes={asset:o.shape({name:o.string,url:o.string,width:o.number,height:o.number,ext:o.string}).isRequired};const Dt=({onClose:e,asset:s,prev:i,next:a,goTo:h,setLocalImage:O,onChangeLogo:C})=>{const{formatMessage:P}=(0,$.Z)(),E=()=>{O(void 0),h(i)},c=()=>{C(s),h(a)};return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsxs)(g.x,{paddingLeft:8,paddingRight:8,paddingTop:6,paddingBottom:6,children:[(0,n.jsxs)(x.k,{justifyContent:"space-between",paddingBottom:6,children:[(0,n.jsxs)(x.k,{direction:"column",alignItems:"flex-start",children:[(0,n.jsx)(l.Z,{variant:"pi",fontWeight:"bold",children:P({id:"Settings.application.customization.modal.pending.title",defaultMessage:"Logo ready to upload"})}),(0,n.jsx)(l.Z,{variant:"pi",textColor:"neutral500",children:P({id:"Settings.application.customization.modal.pending.subtitle",defaultMessage:"Manage the chosen logo before uploading it"})})]}),(0,n.jsx)(f.z,{onClick:E,variant:"secondary",children:P({id:"Settings.application.customization.modal.pending.choose-another",defaultMessage:"Choose another logo"})})]}),(0,n.jsx)(g.x,{maxWidth:(0,B.pxToRem)(180),children:s.url?(0,n.jsx)(zt,{asset:s}):null})]}),(0,n.jsx)(L.m,{startActions:(0,n.jsx)(f.z,{onClick:e,variant:"tertiary",children:P({id:"Settings.application.customization.modal.cancel",defaultMessage:"Cancel"})}),endActions:(0,n.jsx)(f.z,{onClick:c,children:P({id:"Settings.application.customization.modal.pending.upload",defaultMessage:"Upload logo"})})})]})};Dt.defaultProps={next:null,prev:null},Dt.propTypes={goTo:o.func.isRequired,asset:o.shape({name:o.string,url:o.string,width:o.number,height:o.number,ext:o.string}).isRequired,next:o.string,onClose:o.func.isRequired,onChangeLogo:o.func.isRequired,prev:o.string,setLocalImage:o.func.isRequired};const cn={upload:{Component:Pt,modalTitle:{id:"Settings.application.customization.modal.upload",defaultMessage:"Upload logo"},next:"pending",prev:null},pending:{Component:Dt,modalTitle:{id:"Settings.application.customization.modal.pending",defaultMessage:"Pending logo"},next:null,prev:"upload"}},ut=({canUpdate:e,customLogo:s,defaultLogo:i,hint:a,label:h,onChangeLogo:O,onResetLogo:C})=>{const[{currentStep:P},E]=(0,r.useReducer)(en,St),{Component:c,next:A,prev:M,modalTitle:U}=cn[P]||{},{formatMessage:K}=(0,$.Z)(),z=W=>{E({type:"GO_TO",to:W})};return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(X.F,{label:h,selectedSlide:0,hint:a,previousLabel:"",nextLabel:"",onNext:()=>{},onPrevious:()=>{},secondaryLabel:s?.name||"logo.png",actions:(0,n.jsxs)(at.b,{children:[(0,n.jsx)(it.h,{disabled:!e,onClick:()=>z(s?"pending":"upload"),label:K({id:"Settings.application.customization.carousel.change-action",defaultMessage:"Change logo"}),icon:(0,n.jsx)(Xt.Z,{})}),s&&(0,n.jsx)(it.h,{disabled:!e,onClick:C,label:K({id:"Settings.application.customization.carousel.reset-action",defaultMessage:"Reset logo"}),icon:(0,n.jsx)(Yt.Z,{})})]}),children:(0,n.jsx)(mt.q,{label:K({id:"Settings.application.customization.carousel-slide.label",defaultMessage:"Logo slide"}),children:(0,n.jsx)(g.x,{maxHeight:"40%",maxWidth:"40%",as:"img",src:s?.url||i,alt:K({id:"Settings.application.customization.carousel.title",defaultMessage:"Logo"})})})}),(0,n.jsx)(xt,{Component:c,currentStep:P,onChangeLogo:O,customLogo:s,goTo:z,next:A,prev:M,modalTitle:U})]})};ut.defaultProps={canUpdate:!1,customLogo:null,hint:null},ut.propTypes={canUpdate:o.bool,customLogo:o.shape({url:o.string,name:o.string}),label:o.string.isRequired,hint:o.string,defaultLogo:o.string.isRequired,onChangeLogo:o.func.isRequired,onResetLogo:o.func.isRequired};const gn=(e,s)=>wt(e,{menuLogo:{display:s.menuLogo},authLogo:{display:s.authLogo}}),Lt={menuLogo:{display:null,submit:{rawFile:null,isReset:!1}},authLogo:{display:null,submit:{rawFile:null,isReset:!1}}},un=(e=Lt,s)=>(0,Mt.ZP)(e,i=>{switch(s.type){case"SET_CUSTOM_MENU_LOGO":{i.menuLogo.display=s.value,i.menuLogo.submit.rawFile=s.value.rawFile;break}case"SET_CUSTOM_AUTH_LOGO":{i.authLogo.display=s.value,i.authLogo.submit.rawFile=s.value.rawFile;break}case"RESET_CUSTOM_MENU_LOGO":{i.menuLogo.display=null,i.menuLogo.submit={rawFile:null,isReset:!0};break}case"RESET_CUSTOM_AUTH_LOGO":{i.authLogo.display=null,i.authLogo.submit={rawFile:null,isReset:!0};break}default:return i}}),vt=(0,r.forwardRef)(({canUpdate:e,projectSettingsStored:s},i)=>{const{formatMessage:a}=(0,$.Z)(),{trackUsage:h}=(0,B.useTracking)(),{logos:{menu:O,auth:C}}=(0,Q.u)(),[{menuLogo:P,authLogo:E},c]=(0,r.useReducer)(un,Lt,()=>gn(Lt,s)),A=z=>{c({type:"SET_CUSTOM_MENU_LOGO",value:z})},M=()=>{h("didClickResetLogo",{logo:"menu"}),c({type:"RESET_CUSTOM_MENU_LOGO"})},U=z=>{c({type:"SET_CUSTOM_AUTH_LOGO",value:z})},K=()=>{h("didClickResetLogo",{logo:"auth"}),c({type:"RESET_CUSTOM_AUTH_LOGO"})};return(0,r.useImperativeHandle)(i,()=>({getValues:()=>({menuLogo:P.submit,authLogo:E.submit})})),(0,n.jsxs)(g.x,{hasRadius:!0,background:"neutral0",shadow:"tableShadow",paddingTop:6,paddingBottom:6,paddingRight:7,paddingLeft:7,children:[(0,n.jsx)(l.Z,{variant:"delta",as:"h3",children:a({id:"Settings.application.customization",defaultMessage:"Customization"})}),(0,n.jsx)(l.Z,{variant:"pi",textColor:"neutral600",children:a({id:"Settings.application.customization.size-details",defaultMessage:"Max dimension: {dimension}\xD7{dimension}, Max file size: {size}KB"},{dimension:k,size:rt})}),(0,n.jsxs)(Y.r,{paddingTop:4,gap:4,children:[(0,n.jsx)(G.P,{col:6,s:12,children:(0,n.jsx)(ut,{canUpdate:e,customLogo:P.display,defaultLogo:O.default,hint:a({id:"Settings.application.customization.menu-logo.carousel-hint",defaultMessage:"Replace the logo in the main navigation"}),label:a({id:"Settings.application.customization.carousel.menu-logo.title",defaultMessage:"Menu logo"}),onChangeLogo:A,onResetLogo:M})}),(0,n.jsx)(G.P,{col:6,s:12,children:(0,n.jsx)(ut,{canUpdate:e,customLogo:E.display,defaultLogo:C.default,hint:a({id:"Settings.application.customization.auth-logo.carousel-hint",defaultMessage:"Replace the logo in the authentication pages"}),label:a({id:"Settings.application.customization.carousel.auth-logo.title",defaultMessage:"Auth logo"}),onChangeLogo:U,onResetLogo:K})})]})]})});vt.defaultProps={canUpdate:!1,projectSettingsStored:null},vt.propTypes={canUpdate:o.bool,projectSettingsStored:o.shape({menuLogo:o.shape({url:o.string,name:o.string})})};const mn=e=>{const s=new FormData;return Object.entries(e).forEach(([i,a])=>{a&&a.rawFile instanceof File&&s.append(i,a.rawFile),a&&a.isReset&&s.append(i,null)}),s},pn=()=>null,hn=()=>{const e=r.useRef(),s=(0,B.useNotification)(),{trackUsage:i}=(0,B.useTracking)(),{formatMessage:a}=(0,$.Z)(),{get:h,post:O}=(0,B.useFetchClient)(),{updateProjectSettings:C}=(0,Q.u)(),P=(0,jt.useSelector)(Rt.s),{formatAPIError:E}=(0,B.useAPIErrorHandler)(),{communityEdition:c,latestStrapiReleaseTag:A,nodeVersion:M,shouldUpdateStrapi:U,strapiVersion:K}=(0,B.useAppInfo)(),z=(0,Q.p)(pn,async()=>(await t.e(8937).then(t.bind(t,78937))).AdminSeatInfoEE),{allowedActions:{canRead:W,canUpdate:N}}=(0,B.useRBAC)(P.settings["project-settings"]);(0,B.useFocusWhenNavigate)();const{data:q,isLoading:tt}=(0,At.useQuery)(["project-settings"],async()=>{const{data:j}=await h("/admin/project-settings");return j},{cacheTime:0,enabled:W,select(j){return{...j,authLogo:j.authLogo?{...j.authLogo,url:(0,B.prefixFileUrlWithBackendUrl)(j.authLogo.url)}:j.authLogo,menuLogo:j.menuLogo?{...j.menuLogo,url:(0,B.prefixFileUrlWithBackendUrl)(j.menuLogo.url)}:j.menuLogo}}}),dt=(0,At.useMutation)(j=>O("/admin/project-settings",j,{headers:{"Content-Type":"multipart/form-data"}}),{onError(j){s({type:"warning",message:E(j)})},async onSuccess(j){const{menuLogo:nt,authLogo:b}=j;C({menuLogo:nt?.url,authLogo:b?.url}),nt?.rawFile&&i("didChangeLogo",{logo:"menu"}),b?.rawFile&&i("didChangeLogo",{logo:"auth"}),s({type:"success",message:a({id:"app",defaultMessage:"Saved"})})}}),ct=j=>{j.preventDefault(),dt.mutate(mn(e.current.getValues()))};return z?(0,n.jsxs)(gt.A,{children:[(0,n.jsx)(B.SettingsPageTitle,{name:"Application"}),(0,n.jsx)(pt.o,{children:tt?(0,n.jsx)(ht.a,{children:a({id:"Settings.application.isLoading",defaultMessage:"Loading"})}):(0,n.jsxs)("form",{onSubmit:ct,children:[(0,n.jsx)(Et.T,{title:a({id:"Settings.application.title",defaultMessage:"Overview"}),subtitle:a({id:"Settings.application.description",defaultMessage:"Administration panel\u2019s global information"}),primaryAction:N&&(0,n.jsx)(f.z,{type:"submit",startIcon:(0,n.jsx)(bt.Z,{}),children:a({id:"global.save",defaultMessage:"Save"})})}),(0,n.jsx)(H.D,{children:(0,n.jsxs)(x.k,{direction:"column",alignItems:"stretch",gap:6,children:[(0,n.jsxs)(x.k,{direction:"column",alignItems:"stretch",gap:4,hasRadius:!0,background:"neutral0",shadow:"tableShadow",paddingTop:6,paddingBottom:6,paddingRight:7,paddingLeft:7,children:[(0,n.jsx)(l.Z,{variant:"delta",as:"h3",children:a({id:"global.details",defaultMessage:"Details"})}),(0,n.jsxs)(Y.r,{gap:5,as:"dl",children:[(0,n.jsxs)(G.P,{col:6,s:12,children:[(0,n.jsx)(l.Z,{variant:"sigma",textColor:"neutral600",as:"dt",children:a({id:"Settings.application.strapiVersion",defaultMessage:"strapi version"})}),(0,n.jsxs)(x.k,{gap:3,direction:"column",alignItems:"start",as:"dd",children:[(0,n.jsxs)(l.Z,{children:["v",K]}),U&&(0,n.jsx)(Ct.r,{href:`https://github.com/strapi/strapi/releases/tag/${A}`,isExternal:!0,endIcon:(0,n.jsx)(yt.Z,{}),children:a({id:"Settings.application.link-upgrade",defaultMessage:"Upgrade your admin panel"})})]})]}),(0,n.jsxs)(G.P,{col:6,s:12,children:[(0,n.jsx)(l.Z,{variant:"sigma",textColor:"neutral600",as:"dt",children:a({id:"Settings.application.edition-title",defaultMessage:"current plan"})}),(0,n.jsxs)(x.k,{gap:3,direction:"column",alignItems:"start",as:"dd",children:[(0,n.jsx)(l.Z,{children:a({id:"Settings.application.ee-or-ce",defaultMessage:"{communityEdition, select, true {Community Edition} other {Enterprise Edition}}"},{communityEdition:c})}),(0,n.jsx)(Ct.r,{href:"https://strapi.io/pricing-self-hosted",isExternal:!0,endIcon:(0,n.jsx)(yt.Z,{}),children:a({id:"Settings.application.link-pricing",defaultMessage:"See all pricing plans"})})]})]}),(0,n.jsxs)(G.P,{col:6,s:12,children:[(0,n.jsx)(l.Z,{variant:"sigma",textColor:"neutral600",as:"dt",children:a({id:"Settings.application.node-version",defaultMessage:"node version"})}),(0,n.jsx)(l.Z,{as:"dd",children:M})]}),(0,n.jsx)(z,{})]})]}),W&&q&&(0,n.jsx)(vt,{canUpdate:N,ref:e,projectSettingsStored:q})]})})]})})]}):null};function En(e){return e.filter((s,i,a)=>a.findIndex(h=>h.key===s.key)===i)}function Mn(){const{settingId:e}=(0,lt.UO)(),{settings:s}=(0,B.useStrapiApp)(),{formatMessage:i}=(0,$.Z)(),{isLoading:a,menu:h}=qt(),O=(0,Q.p)(nn,async()=>(await t.e(9426).then(t.bind(t,49426))).ROUTES_EE,{combine(E,c){return[...E,...c]},defaultValue:[]}),C=r.useMemo(()=>En(O.map(({to:E,Component:c,exact:A})=>(0,Q.d)(c,E,A))),[O]),P=Object.values(s).flatMap(E=>{const{links:c}=E;return c.map(A=>(0,Q.d)(A.Component,A.to,A.exact||!1))});return a?(0,n.jsx)(B.LoadingIndicatorPage,{}):e?(0,n.jsxs)(gt.A,{sideNav:(0,n.jsx)(Bt,{menu:h}),children:[(0,n.jsx)(_t.q,{title:i({id:"global.settings",defaultMessage:"Settings"})}),(0,n.jsxs)(lt.rs,{children:[(0,n.jsx)(lt.AW,{path:"/settings/application-infos",component:hn,exact:!0}),C,P]})]}):(0,n.jsx)(lt.l_,{to:"/settings/application-infos"})}},71877:(y,T,t)=>{"use strict";t.d(T,{m:()=>l});var n=t(74081),r=t(72450),m=t(23298);const u=`${232/16}rem`,p=(0,r.default)(m.r)`
  width: ${u};
  background: ${({theme:d})=>d.colors.neutral100};
  position: sticky;
  top: 0;
  height: 100vh;
  overflow-y: auto;
  border-right: 1px solid ${({theme:d})=>d.colors.neutral200};
  z-index: 1;
`,l=({ariaLabel:d,...g})=>(0,n.jsx)(p,{"aria-label":d,as:"nav",...g})},25804:(y,T,t)=>{"use strict";t.d(T,{p:()=>v});var n=t(74081),r=t(27279),m=t(10382),u=t(72450),p=t(89166),l=t(74513),d=t(76646),g=t(84366),D=t(93415),x=t(28479),f=t(31624),R=t(10701),L=t(21395),_=t(4987);const I=(0,u.default)(g.i)`
  width: ${24/16}rem;
  background-color: ${({theme:S})=>S.colors.neutral200};
`,v=({as:S="h2",label:F,searchLabel:Z="",searchable:V=!1,onChange:st=()=>{},value:w="",onClear:et=()=>{},onSubmit:J=()=>{},id:ot})=>{const[X,at]=(0,r.useState)(!1),it=(0,d.D)(X),mt=(0,l.M)(ot),Y=(0,r.useRef)(void 0),G=(0,r.useRef)(void 0);(0,r.useEffect)(()=>{X&&Y.current&&Y.current.focus(),it&&!X&&G.current&&G.current.focus()},[X,it]);const gt=()=>{at(H=>!H)},pt=H=>{et(H),Y.current.focus()},ht=H=>{H.relatedTarget?.id!==mt&&at(!1)},Et=H=>{H.key===p.y.ESCAPE&&at(!1)};return X?(0,n.jsxs)(D.x,{paddingLeft:4,paddingTop:5,paddingBottom:2,paddingRight:4,children:[(0,n.jsx)(x.U,{children:(0,n.jsx)(f.w,{name:"searchbar",value:w,onChange:st,placeholder:"e.g: strapi-plugin-abcd",onKeyDown:Et,ref:Y,onBlur:ht,onClear:pt,onSubmit:J,clearLabel:"Clear",size:"S",children:Z})}),(0,n.jsx)(D.x,{paddingLeft:2,paddingTop:4,children:(0,n.jsx)(I,{})})]}):(0,n.jsxs)(D.x,{paddingLeft:6,paddingTop:6,paddingBottom:2,paddingRight:4,children:[(0,n.jsxs)(R.k,{justifyContent:"space-between",alignItems:"flex-start",children:[(0,n.jsx)(L.Z,{variant:"beta",as:S,children:F}),V&&(0,n.jsx)(_.h,{ref:G,onClick:gt,label:Z,icon:(0,n.jsx)(m.Z,{})})]}),(0,n.jsx)(D.x,{paddingTop:4,children:(0,n.jsx)(I,{})})]})}},49370:(y,T,t)=>{"use strict";t.d(T,{E:()=>R});var n=t(74081),r=t(27279),m=t(79830),u=t(72450),p=t(93415),l=t(21395),d=t(10701),g=t(30413);const D=(0,u.default)(p.x)`
  display: flex;
  align-items: center;
  justify-content: space-between;
  text-decoration: none;
  color: ${({theme:L})=>L.colors.neutral800};
  svg > * {
    fill: ${({theme:L})=>L.colors.neutral600};
  }

  &.active {
    ${({theme:L})=>`
      background-color: ${L.colors.primary100};
      border-right: 2px solid ${L.colors.primary600};
      svg > * {
        fill: ${L.colors.primary700};
      }
      ${l.Z} {
        color: ${L.colors.primary700};
        font-weight: 500;
      }
      `}
  }

  &:focus-visible {
    outline-offset: -2px;
  }
`,x=(0,u.default)(m.Z)`
  width: ${12/16}rem;
  height: ${4/16}rem;
  * {
    fill: ${({theme:L,$active:_})=>_?L.colors.primary600:L.colors.neutral600};
  }
`,f=u.default.div`
  svg {
    height: ${12/16}rem;
    width: ${12/16}rem;
  }
`,R=r.forwardRef(({children:L,icon:_=null,withBullet:I=!1,as:v=g.f,isSubSectionChild:S=!1,...F},Z)=>(0,n.jsxs)(D,{as:v,icon:_,background:"neutral100",paddingLeft:S?9:7,paddingBottom:2,paddingTop:2,ref:Z,...F,children:[(0,n.jsxs)(d.k,{children:[_?(0,n.jsx)(f,{children:_}):(0,n.jsx)(x,{}),(0,n.jsx)(p.x,{paddingLeft:2,children:(0,n.jsx)(l.Z,{as:"span",children:L})})]}),I&&(0,n.jsx)(p.x,{as:d.k,paddingRight:4,children:(0,n.jsx)(x,{$active:!0})})]}))},20534:(y,T,t)=>{"use strict";t.d(T,{D:()=>_});var n=t(74081),r=t(27279),m=t(72450),u=t(10411),p=t(10701),l=t(93415),d=t(21395);const g=(0,m.default)(p.k)`
  border: none;
  padding: 0;
  background: transparent;
`,D=m.default.div`
  display: flex;
  align-items: center;
  transform: rotateX(${({rotated:I})=>I?"0deg":"180deg"});
`,x=({collapsable:I=!1,label:v,onClick:S=()=>{},ariaExpanded:F,ariaControls:Z})=>I?(0,n.jsxs)(g,{as:"button",onClick:S,"aria-expanded":F,"aria-controls":Z,textAlign:"left",children:[(0,n.jsx)(l.x,{paddingRight:1,children:(0,n.jsx)(d.Z,{variant:"sigma",textColor:"neutral600",children:v})}),I&&(0,n.jsx)(D,{rotated:F,children:(0,n.jsx)(u.Z,{"aria-hidden":!0})})]}):(0,n.jsx)(g,{children:(0,n.jsx)(l.x,{paddingRight:1,children:(0,n.jsx)(d.Z,{variant:"sigma",textColor:"neutral600",children:v})})});var f=t(74513),R=t(4963);const L=(0,m.default)(l.x)`
  svg {
    height: ${4/16}rem;
    path {
      fill: ${({theme:I})=>I.colors.neutral500};
    }
  }
`,_=({collapsable:I=!1,label:v,badgeLabel:S,children:F,id:Z})=>{const[V,st]=(0,r.useState)(!0),w=(0,f.M)(Z),et=()=>{st(J=>!J)};return(0,n.jsxs)(p.k,{direction:"column",alignItems:"stretch",gap:1,children:[(0,n.jsx)(L,{paddingLeft:6,paddingTop:2,paddingBottom:2,paddingRight:4,children:(0,n.jsxs)(l.x,{position:"relative",paddingRight:S?6:0,children:[(0,n.jsx)(x,{onClick:et,ariaExpanded:V,ariaControls:w,collapsable:I,label:v}),S&&(0,n.jsx)(R.C,{backgroundColor:"neutral150",textColor:"neutral600",position:"absolute",right:0,top:"50%",transform:"translateY(-50%)",children:S})]})}),(!I||V)&&(0,n.jsx)("ol",{id:w,children:r.Children.map(F,(J,ot)=>(0,n.jsx)("li",{children:J},ot))})]})}},96220:(y,T,t)=>{"use strict";t.d(T,{Z:()=>p});var n=t(74081),r=t(27279),m=t(93415),u=t(10701);const p=({children:l,spacing:d=2,horizontal:g=!1,...D})=>(0,n.jsx)(m.x,{paddingTop:2,paddingBottom:4,children:(0,n.jsx)(u.k,{as:"ol",gap:d,direction:g?"row":"column",alignItems:g?"center":"stretch",...D,children:r.Children.map(l,(x,f)=>(0,n.jsx)("li",{children:x},f))})})}}]);
